<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Code Cookbook by THUMPERSECURE — OSINT &amp; SEO specialist. Privacy tools, phone intelligence, SEO tools, and cyberpunk portfolio.">
<meta name="keywords" content="OSINT, open source intelligence, SEO, privacy tools, palm-tree, Telespot, Spin, Telespotter, xTELENUMSINT, TeleSTOP, opt-out-manual-2026, spicy-cat, TelespotXX, bluettool, LOVE-BOMB, zweather, code cookbook, thumpersecure, cybersecurity, phone intelligence, OSINT tools, SEO tools">
<meta name="author" content="THUMPERSECURE">
<meta name="theme-color" content="#06060e">
<meta property="og:title" content="THUMPERSECURE | Code Cookbook">
<meta property="og:description" content="OSINT &amp; SEO specialist portfolio. Privacy tools, phone intelligence, SEO automation — cyberpunk code cookbook experience.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://thumpersecure.github.io/thumpersecure/">
<meta property="og:site_name" content="Code Cookbook">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://thumpersecure.github.io/thumpersecure/data/og-placeholder.svg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="THUMPERSECURE | Code Cookbook">
<meta name="twitter:description" content="OSINT &amp; SEO specialist portfolio. Privacy tools, phone intelligence, SEO automation — cyberpunk code cookbook.">
<meta name="twitter:image" content="https://thumpersecure.github.io/thumpersecure/data/og-placeholder.svg">
<link rel="canonical" href="https://thumpersecure.github.io/thumpersecure/">
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E%E2%9F%A9%3C/text%3E%3C/svg%3E">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&amp;family=Inter:wght@400;600;700&amp;display=swap" rel="stylesheet">
<title>THUMPERSECURE | Code Cookbook</title>
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"ProfilePage","url":"https://thumpersecure.github.io/thumpersecure/","mainEntity":{"@type":"Person","name":"THUMPERSECURE","url":"https://github.com/thumpersecure","sameAs":["https://github.com/thumpersecure"],"jobTitle":"OSINT & SEO Specialist","knowsAbout":["Open Source Intelligence","Search Engine Optimization","Privacy Tools","Security Research","Phone Intelligence","Data Aggregation"]}}
</script>

<!-- ============ EMBEDDED FALLBACK SNAPSHOT (Phase 2) ============ -->
<script id="fallback-snapshot" type="application/json">
{"last_updated_utc":"2026-02-28T15:55:22.754Z","stats":{"tools_count":13,"stars_total":541,"featured_count":4,"followers":43},"repos":[{"name":"palm-tree","description":"A tool to generate randomized traffic noise using 30+ personas, chaos modes, and geo rotation.","topics":[],"stars":139,"last_updated":"2026-02-26T21:47:22Z","language":"Python","homepage":"https://thumpersecure.github.io/palm-tree/","html_url":"https://github.com/thumpersecure/palm-tree","featured":true},{"name":"Telespot","description":"TeleSpot OSINT lookup from Telephone number using DDGR + BING + GOOGLE + DEHASHED with pattern recognition.","topics":["osint","osint-phonenumbers","phone-number"],"stars":99,"last_updated":"2026-02-27T00:33:38Z","language":"Python","homepage":null,"html_url":"https://github.com/thumpersecure/Telespot","featured":true},{"name":"Spin","description":"SpinWeb Browser - A full featured desktop application for OSINT, security, and extreme privacy.","topics":[],"stars":77,"last_updated":"2026-02-28T12:04:39Z","language":"JavaScript","homepage":"https://thumpersecure.github.io/Spin/","html_url":"https://github.com/thumpersecure/Spin","featured":true},{"name":"xTELENUMSINT","description":"Chrome extension for Telephone OSINT that automates searches in 10 different formats.","topics":["osint-phonenumbers","phone-number"],"stars":56,"last_updated":"2026-02-28T10:01:53Z","language":"JavaScript","homepage":null,"html_url":"https://github.com/thumpersecure/xTELENUMSINT","featured":false},{"name":"Telespotter","description":"A version of Telespot in RUST - searches telephone numbers across Google, Bing, DuckDuckGo, and Dehashed.","topics":["osint","osint-phonenumbers"],"stars":53,"last_updated":"2026-02-27T00:02:14Z","language":"Rust","homepage":null,"html_url":"https://github.com/thumpersecure/Telespotter","featured":false},{"name":"TeleSTOP","description":"Desktop program to help remove your data from 50+ people-search sites. No cloud, 100% local.","topics":[],"stars":34,"last_updated":"2026-02-28T01:24:18Z","language":"TypeScript","homepage":null,"html_url":"https://github.com/thumpersecure/TeleSTOP","featured":false},{"name":"opt-out-manual-2026","description":"2026 DIY Opt-Out Manual for removal from over 400 data broker and people-search sites.","topics":["guide","opt-out"],"stars":27,"last_updated":"2026-02-28T00:55:59Z","language":null,"homepage":"https://thumpersecure.github.io/opt-out-manual-2026/","html_url":"https://github.com/thumpersecure/opt-out-manual-2026","featured":true},{"name":"spicy-cat","description":"Privacy tool that generates realistic digital personas and behavioral noise to disrupt profiling.","topics":[],"stars":22,"last_updated":"2026-02-26T23:49:13Z","language":"Python","homepage":null,"html_url":"https://github.com/thumpersecure/spicy-cat","featured":false},{"name":"TelespotXX","description":"Telespot, TelespotX, and Telespotter all in ONE web app for easier use.","topics":["osint","osint-phonenumbers"],"stars":21,"last_updated":"2026-02-27T00:38:33Z","language":"Python","homepage":null,"html_url":"https://github.com/thumpersecure/TelespotXX","featured":false},{"name":"blueTTool","description":"Web utility for testing and managing Bluetooth Low Energy devices with Bluefy on iOS.","topics":["ble","bluetooth"],"stars":8,"last_updated":"2026-02-27T20:53:08Z","language":"JavaScript","homepage":"https://thumpersecure.github.io/blueTTool/","html_url":"https://github.com/thumpersecure/blueTTool","featured":false},{"name":"LOVE-BOMB","description":"Experimental utility project.","topics":[],"stars":2,"last_updated":"2026-02-27T00:34:08Z","language":"HTML","homepage":"https://thumpersecure.github.io/LOVE-BOMB/","html_url":"https://github.com/thumpersecure/LOVE-BOMB","featured":false},{"name":"ofacebook","description":"A Facebook OSINT tool that uses prefixes. Designed as simple mobile web app.","topics":["osint-facebook"],"stars":2,"last_updated":"2026-02-28T00:56:52Z","language":"JavaScript","homepage":"https://thumpersecure.github.io/ofacebook/","html_url":"https://github.com/thumpersecure/ofacebook","featured":false},{"name":"zweather","description":"Weather app that compares current forecasts with prior forecast changes.","topics":["weather"],"stars":1,"last_updated":"2026-02-27T00:40:16Z","language":"JavaScript","homepage":"https://thumpersecure.github.io/zweather/","html_url":"https://github.com/thumpersecure/zweather","featured":false}]}
</script>

<style>
/* ====== CSS VARIABLES ====== */
:root{
  --bg:#06060e;--panel:rgba(8,8,20,0.92);
  --cyan:#00ffcc;--magenta:#ff00aa;--green:#00ff41;--tron:#18dcff;
  --amber:#ffaa00;--violet:#8b5cf6;--red:#ff3e3e;
  --text:#b8c0d0;--muted:#6272a4;--dim:#2a2d3a;
  --border:rgba(0,255,204,0.12);
  --mono:'JetBrains Mono','Fira Code','Courier New',monospace;
  --sans:Inter,system-ui,-apple-system,sans-serif;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:var(--sans);background:var(--bg);color:var(--text);overflow-x:hidden;min-height:100vh;line-height:1.6}

/* ====== BACKGROUND LAYERS ====== */
#particleCanvas,#rainCanvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0}
#rainCanvas{z-index:1;opacity:0.035}
.crt{position:fixed;inset:0;pointer-events:none;z-index:998;
  background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,0.03) 2px,rgba(0,0,0,0.03) 4px)}
.sweep{position:fixed;left:0;width:100%;height:1px;
  background:linear-gradient(90deg,transparent 5%,var(--cyan) 50%,transparent 95%);
  z-index:997;pointer-events:none;opacity:0.12;animation:sweepDown 8s linear infinite}
@keyframes sweepDown{from{top:-1px}to{top:100vh}}
.ambient{position:fixed;inset:0;pointer-events:none;z-index:0;
  background:radial-gradient(ellipse 600px 400px at 10% 15%,rgba(0,255,204,0.05),transparent),
  radial-gradient(ellipse 500px 500px at 85% 10%,rgba(255,0,170,0.04),transparent),
  radial-gradient(ellipse 700px 400px at 50% 95%,rgba(139,92,246,0.05),transparent)}
.tron-grid{position:fixed;bottom:0;left:0;width:100%;height:35vh;pointer-events:none;z-index:0;
  background:linear-gradient(0deg,rgba(24,220,255,0.03) 1px,transparent 1px),
  linear-gradient(90deg,rgba(24,220,255,0.03) 1px,transparent 1px);
  background-size:60px 60px;
  mask-image:linear-gradient(to top,rgba(0,0,0,0.4),transparent);
  -webkit-mask-image:linear-gradient(to top,rgba(0,0,0,0.4),transparent)}

/* ====== BOOT SCREEN ====== */
.boot{position:fixed;inset:0;z-index:10000;background:#000;padding:clamp(1rem,4vw,2.5rem);
  font-family:var(--mono);font-size:clamp(0.65rem,1.1vw,0.82rem);color:var(--green);overflow-y:auto;
  transition:opacity 0.5s ease}
.boot.done{opacity:0;pointer-events:none}
.boot div{line-height:1.7}

/* ====== LAYOUT ====== */
@keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.page-wrap{position:relative;z-index:2;animation:fadeInUp 0.8s ease-out}
.container{max-width:1120px;margin:0 auto;padding:0 clamp(1rem,4vw,2.5rem)}

/* ====== GLASS PANEL ====== */
.glass{background:var(--panel);border:1px solid var(--border);border-radius:16px;
  backdrop-filter:blur(18px);-webkit-backdrop-filter:blur(18px);
  box-shadow:0 0 60px rgba(0,255,204,0.03);transition:border-color .4s,box-shadow .4s;
  position:relative;overflow:hidden}
.glass::before{content:'';position:absolute;top:-1px;left:-60px;width:60px;height:2px;
  background:var(--tron);box-shadow:0 0 8px var(--tron),0 0 20px rgba(24,220,255,0.4);
  border-radius:2px;animation:tronTrace 4s linear infinite;opacity:0.6;z-index:1}
@keyframes tronTrace{0%{left:-60px}100%{left:calc(100% + 60px)}}
.glass:hover{border-color:rgba(24,220,255,0.25);box-shadow:0 0 80px rgba(24,220,255,0.06)}

/* ====== GLITCH TITLE ====== */
.glitch{font-family:var(--mono);font-size:clamp(2.9rem,8vw,6rem);font-weight:900;
  color:var(--cyan);text-shadow:0 0 7px var(--cyan),0 0 20px var(--cyan),0 0 42px rgba(0,179,170,0.4);
  position:relative;display:inline-block;letter-spacing:-0.02em}
.glitch::before,.glitch::after{content:attr(data-text);position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}
.glitch::before{color:var(--magenta);text-shadow:0 0 10px var(--magenta);animation:g1 3s infinite linear alternate-reverse;clip-path:inset(0 0 65% 0)}
.glitch::after{color:var(--green);text-shadow:0 0 10px var(--green);animation:g2 2.5s infinite linear alternate-reverse;clip-path:inset(65% 0 0 0)}
@keyframes g1{0%{clip-path:inset(0 0 85% 0);transform:translate(0)}10%{clip-path:inset(15% 0 60% 0);transform:translate(-3px,1px)}20%{clip-path:inset(50% 0 20% 0);transform:translate(3px,-1px)}30%{clip-path:inset(10% 0 70% 0);transform:translate(0)}40%{clip-path:inset(60% 0 10% 0);transform:translate(-2px,2px)}50%{clip-path:inset(30% 0 40% 0);transform:translate(2px)}60%{clip-path:inset(70% 0 5% 0);transform:translate(-1px)}70%{clip-path:inset(5% 0 80% 0);transform:translate(0)}80%{clip-path:inset(40% 0 30% 0);transform:translate(3px,-2px)}90%{clip-path:inset(80% 0 0 0);transform:translate(-3px,1px)}100%{clip-path:inset(0 0 85% 0);transform:translate(0)}}
@keyframes g2{0%{clip-path:inset(85% 0 0 0);transform:translate(0)}10%{clip-path:inset(60% 0 15% 0);transform:translate(2px,-1px)}20%{clip-path:inset(20% 0 50% 0);transform:translate(-2px,1px)}30%{clip-path:inset(70% 0 10% 0);transform:translate(0)}40%{clip-path:inset(10% 0 60% 0);transform:translate(1px,2px)}50%{clip-path:inset(40% 0 30% 0);transform:translate(-2px)}60%{clip-path:inset(5% 0 70% 0);transform:translate(1px)}70%{clip-path:inset(80% 0 5% 0);transform:translate(0)}80%{clip-path:inset(30% 0 40% 0);transform:translate(-3px,2px)}90%{clip-path:inset(0 0 80% 0);transform:translate(2px,-1px)}100%{clip-path:inset(85% 0 0 0);transform:translate(0)}}

/* ====== HERO ====== */
.hero{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:7.6rem 0 3rem}
.hero-inner{text-align:center;padding:clamp(2.2rem,5vw,3.8rem);max-width:860px;width:100%}
.eyebrow{font-family:var(--mono);font-size:clamp(0.6rem,1.1vw,0.75rem);letter-spacing:0.4em;text-transform:uppercase;color:var(--magenta);margin-bottom:0.8rem}
.hero-sub{color:var(--muted);font-family:var(--mono);font-size:clamp(0.8rem,1.4vw,0.95rem);margin-top:1rem}
.typer-wrap{font-family:var(--mono);font-size:clamp(0.8rem,1.4vw,1rem);color:var(--green);height:1.8em;margin:1.5rem 0 2rem;display:flex;align-items:center;justify-content:center}
.typer-cursor{display:inline-block;width:2px;height:1.2em;background:var(--green);margin-left:2px;animation:blink 1s step-end infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}

/* ====== TOP CONTROL BAR (music + settings) ====== */
.top-bar-wrap{position:fixed;top:0.45rem;left:0;right:0;z-index:26;display:flex;justify-content:center;padding:0 0.72rem;pointer-events:none}
.top-bar{width:min(100%,1100px);margin:0 auto;position:relative;padding:0.44rem 0.56rem 0.5rem;border-radius:16px;border:1px solid rgba(24,220,255,0.25);background:linear-gradient(140deg,rgba(3,10,20,0.95),rgba(8,8,22,0.94));display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:0.42rem;overflow:hidden;backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);box-shadow:0 10px 35px rgba(0,0,0,0.34),0 0 22px rgba(24,220,255,0.11),inset 0 0 0 1px rgba(255,0,170,0.12);pointer-events:auto}
.top-bar::before{content:'';position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(24,220,255,0.16),transparent);transform:translateX(-120%);animation:musicSweep 4.2s linear infinite;pointer-events:none}
.top-bar::after{content:'';position:absolute;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(255,255,255,0.015) 3px,rgba(255,255,255,0.015) 6px);pointer-events:none}
@keyframes musicSweep{to{transform:translateX(120%)}}
.top-bar-label{flex:1 1 100%;font-family:var(--mono);font-size:0.52rem;letter-spacing:0.18em;text-transform:uppercase;color:var(--magenta);text-align:center;line-height:1.3;text-shadow:0 0 8px rgba(255,0,170,0.35)}

/* ====== MUSIC CONTROLS ====== */
.music-controls-row{display:flex;align-items:center;gap:0.42rem;width:100%;flex-wrap:wrap;justify-content:center}
.music-mute-btn{border:1px solid rgba(24,220,255,0.22);border-radius:10px;background:rgba(2,12,25,0.85);color:var(--tron);width:38px;height:38px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;font-size:1rem;transition:transform .2s,border-color .22s,box-shadow .22s;flex:0 0 auto}
.music-mute-btn:hover{transform:translateY(-1px);border-color:var(--tron);box-shadow:0 0 12px rgba(24,220,255,0.2)}
.music-mute-btn:focus-visible{outline:2px solid var(--cyan);outline-offset:2px}
.music-mute-btn.muted{color:var(--red);border-color:rgba(255,62,62,0.3)}
.music-btns{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:0.42rem;flex:1 1 0;min-width:0}
.music-btn{--eq-hi:var(--tron);--eq-mid:var(--cyan);--eq-low:rgba(0,255,204,0.28);--eq-glow:rgba(24,220,255,0.42);position:relative;border:1px solid rgba(24,220,255,0.22);border-radius:10px;background:linear-gradient(150deg,rgba(2,12,25,0.95),rgba(7,7,20,0.9));color:var(--text);padding:0.44rem 0.6rem 0.5rem;min-height:42px;min-width:0;width:100%;display:inline-flex;align-items:center;gap:0.48rem;font-family:var(--mono);font-size:0.56rem;line-height:1.2;text-transform:uppercase;letter-spacing:0.05em;cursor:pointer;transition:transform .2s,border-color .22s,box-shadow .22s,background .22s}
.music-btn::before{content:'';position:absolute;left:0.6rem;right:0.6rem;top:0.32rem;height:1px;background:linear-gradient(90deg,rgba(255,255,255,0),rgba(24,220,255,0.68),rgba(255,255,255,0));opacity:0.52}
.music-btn::after{content:'';position:absolute;left:0.62rem;right:0.62rem;bottom:0.32rem;height:1px;background:linear-gradient(90deg,rgba(24,220,255,0),rgba(24,220,255,0.86),rgba(0,255,65,0.72),rgba(24,220,255,0));opacity:0.5;transition:opacity .22s,height .22s,box-shadow .22s}
.music-btn:hover{transform:translateY(-1px);border-color:rgba(24,220,255,0.48);box-shadow:0 0 14px rgba(24,220,255,0.2)}
.music-btn:focus-visible{outline:2px solid var(--cyan);outline-offset:2px}
.music-btn.active{border-color:var(--cyan);background:linear-gradient(150deg,rgba(5,18,31,0.96),rgba(8,12,24,0.9));box-shadow:0 0 16px rgba(0,255,204,0.22)}
.music-btn.active::after{height:2px;opacity:1;box-shadow:0 0 8px rgba(24,220,255,0.7)}
.music-btn[data-theme="tron"]{--eq-hi:#18dcff;--eq-mid:#00ffcc;--eq-low:rgba(24,220,255,0.24);--eq-glow:rgba(24,220,255,0.45);border-color:rgba(24,220,255,0.38)}
.music-btn[data-theme="robot"]{--eq-hi:#ff00aa;--eq-mid:#8b5cf6;--eq-low:rgba(255,0,170,0.24);--eq-glow:rgba(255,0,170,0.44);border-color:rgba(255,0,170,0.34)}
.music-btn[data-theme="swordfish"]{--eq-hi:#00ff41;--eq-mid:#ffaa00;--eq-low:rgba(0,255,65,0.22);--eq-glow:rgba(0,255,65,0.42);border-color:rgba(0,255,65,0.34)}
.music-name{display:flex;flex-direction:column;gap:2px;min-width:0;text-align:left}
.music-track{color:var(--text);font-size:0.55rem;line-height:1.2}
.music-vibe{font-size:0.49rem;color:var(--muted);letter-spacing:0.1em}
.music-btn.active .music-vibe{color:var(--cyan)}
.music-eq{display:inline-flex;align-items:flex-end;gap:2px;height:17px;min-width:34px;flex:0 0 auto}
.music-eq span{position:relative;width:3px;height:16px;border-radius:4px;background:linear-gradient(180deg,var(--eq-hi) 0%,var(--eq-mid) 55%,var(--eq-low) 100%);transform-origin:bottom center;transform:scaleY(0.24);opacity:0.88;box-shadow:0 0 6px var(--eq-glow)}
.music-eq span::after{content:'';position:absolute;left:0;right:0;bottom:-2px;height:2px;border-radius:999px;background:var(--eq-hi);filter:blur(1px);opacity:0.45}
.music-btn:hover .music-eq span{opacity:1}
.music-btn.active .music-eq{filter:drop-shadow(0 0 8px var(--eq-glow))}
.music-btn.active .music-eq span:nth-child(1){animation:eqA .66s ease-in-out infinite}
.music-btn.active .music-eq span:nth-child(2){animation:eqB .58s ease-in-out infinite}
.music-btn.active .music-eq span:nth-child(3){animation:eqC .76s ease-in-out infinite}
.music-btn.active .music-eq span:nth-child(4){animation:eqD .62s ease-in-out infinite}
.music-btn.active .music-eq span:nth-child(5){animation:eqE .7s ease-in-out infinite}
.music-btn.active .music-eq span:nth-child(6){animation:eqF .64s ease-in-out infinite}
@keyframes eqA{0%,100%{transform:scaleY(0.24)}50%{transform:scaleY(1)}}
@keyframes eqB{0%,100%{transform:scaleY(0.32)}50%{transform:scaleY(0.92)}}
@keyframes eqC{0%,100%{transform:scaleY(0.28)}50%{transform:scaleY(0.98)}}
@keyframes eqD{0%,100%{transform:scaleY(0.22)}50%{transform:scaleY(0.9)}}
@keyframes eqE{0%,100%{transform:scaleY(0.35)}50%{transform:scaleY(0.85)}}
@keyframes eqF{0%,100%{transform:scaleY(0.2)}50%{transform:scaleY(0.95)}}
.music-meta{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;gap:0.45rem 0.8rem;width:100%;padding:0.06rem 0.35rem 0;font-family:var(--mono)}
.music-status{font-size:0.58rem;letter-spacing:0.08em;text-transform:uppercase;color:var(--muted);text-align:center}
.music-status.playing{color:var(--green);text-shadow:0 0 8px rgba(0,255,65,0.4)}
.music-status.error{color:var(--amber)}
.music-next-btn{border:1px solid rgba(24,220,255,0.22);border-radius:8px;background:rgba(2,12,25,0.85);color:var(--tron);padding:0.2rem 0.5rem;font-family:var(--mono);font-size:0.56rem;cursor:pointer;transition:transform .2s,border-color .22s}
.music-next-btn:hover{transform:translateY(-1px);border-color:var(--tron)}
.music-next-btn:focus-visible{outline:2px solid var(--cyan);outline-offset:2px}
.music-fallback{font-size:0.58rem;letter-spacing:0.07em;text-transform:uppercase;color:var(--cyan);text-decoration:none;border-bottom:1px dotted var(--cyan)}
.music-fallback:hover{color:var(--tron)}
.autoplay-banner{display:none;width:100%;text-align:center;padding:0.3rem 0.5rem;font-family:var(--mono);font-size:0.56rem;color:var(--amber);letter-spacing:0.08em;cursor:pointer}
.autoplay-banner.show{display:block}

/* ====== TOP TOGGLES ROW ====== */
.top-toggles{display:flex;align-items:center;justify-content:center;gap:0.5rem;width:100%;padding:0.15rem 0 0;flex-wrap:wrap}
.top-toggle-btn{border:1px solid rgba(24,220,255,0.18);border-radius:999px;background:rgba(2,12,25,0.85);color:var(--muted);font-family:var(--mono);font-size:0.52rem;letter-spacing:0.06em;text-transform:uppercase;padding:0.25rem 0.6rem;cursor:pointer;transition:all .22s;white-space:nowrap}
.top-toggle-btn:hover{border-color:rgba(24,220,255,0.4);color:var(--text)}
.top-toggle-btn:focus-visible{outline:2px solid var(--cyan);outline-offset:2px}
.top-toggle-btn.on{border-color:var(--cyan);color:var(--cyan)}
.top-toggle-btn.settings-btn{border-color:rgba(139,92,246,0.3);color:var(--violet)}
.top-toggle-btn.settings-btn:hover{border-color:var(--violet)}

/* ====== HERO BUTTONS ====== */
.hero-btns{display:flex;gap:1rem;justify-content:center;flex-wrap:wrap}
.btn{font-family:var(--mono);font-size:0.82rem;padding:0.65rem 1.6rem;border-radius:4px;text-decoration:none;font-weight:600;transition:all .3s;cursor:pointer;border:none;text-transform:uppercase;letter-spacing:0.05em}
.btn-primary{background:var(--cyan);color:var(--bg);box-shadow:0 0 20px rgba(0,255,204,0.25)}
.btn-primary:hover{box-shadow:0 0 35px rgba(0,255,204,0.5);transform:translateY(-2px)}
.btn-ghost{background:transparent;color:var(--cyan);border:1px solid var(--cyan)}
.btn-ghost:hover{background:rgba(0,255,204,0.08);transform:translateY(-2px)}
.btn:focus-visible{outline:2px solid var(--cyan);outline-offset:2px}

/* ====== STATS ====== */
.quote-section{padding:3rem 0}
.quote-block{max-width:680px;margin:0 auto;padding:2rem 2.5rem;border-left:3px solid var(--magenta);font-family:var(--mono);position:relative}
.quote-text{font-size:clamp(0.95rem,1.8vw,1.15rem);color:var(--text);font-style:italic;line-height:1.7}
.quote-cite{display:block;margin-top:1rem;color:var(--magenta);font-size:0.82rem;font-style:normal}
.section-head{font-family:var(--mono);font-size:clamp(1.1rem,2.2vw,1.4rem);color:var(--muted);margin-bottom:2.5rem;padding-left:0.5rem;border-left:3px solid var(--cyan)}
.section-head span{color:var(--cyan)}
.stats-section{padding:2.5rem 0;border-top:1px solid var(--border);border-bottom:1px solid var(--border)}
.stats-inner{display:flex;justify-content:center;align-items:center;gap:clamp(0.8rem,3vw,2.5rem);flex-wrap:wrap;font-family:var(--mono);font-size:clamp(0.72rem,1.3vw,0.92rem)}
.stat-item{display:flex;align-items:center;gap:0.4rem}
.stat-label{color:var(--muted)}.stat-val{color:var(--cyan);font-weight:700;min-width:2ch}
.stat-sep{color:var(--dim);user-select:none}
.data-status{text-align:center;font-family:var(--mono);font-size:0.62rem;color:var(--muted);padding:0.5rem 0 0;letter-spacing:0.06em}
.data-status.fallback{color:var(--amber)}

/* ====== ASCII DIVIDERS ====== */
.ascii-div{text-align:center;font-family:var(--mono);font-size:0.7rem;color:var(--dim);padding:2rem 0;user-select:none;letter-spacing:0.3em;overflow:hidden}

/* ====== COLLAPSIBLE MODULES (Phase 4) ====== */
.ts-module{margin-bottom:0.5rem}
.ts-module-header{display:flex;align-items:center;gap:0.8rem;width:100%;background:none;border:2px solid rgba(24,220,255,0.3);border-radius:12px;padding:0.8rem 1.2rem;cursor:pointer;text-align:left;transition:border-color .3s,box-shadow .3s,background .3s,transform .24s;font-family:inherit;color:inherit;position:relative;overflow:hidden}
.ts-module-header::before{content:'';position:absolute;top:0;left:-110%;width:70%;height:100%;background:linear-gradient(90deg,transparent,rgba(24,220,255,0.12),transparent);pointer-events:none;transition:left .55s ease}
.ts-module-header::after{content:'';position:absolute;left:0;bottom:-1px;height:2px;width:0;background:linear-gradient(90deg,var(--tron),var(--cyan));box-shadow:0 0 8px rgba(24,220,255,0.35);transition:width .35s ease;pointer-events:none}
.ts-module-header:hover{border-color:rgba(24,220,255,0.62);box-shadow:0 0 24px rgba(24,220,255,0.13),inset 0 0 16px rgba(24,220,255,0.06);background:rgba(24,220,255,0.06);transform:translateY(-1px)}
.ts-module-header:hover::before{left:125%}
.ts-module-header:hover::after,.ts-module-header[aria-expanded="true"]::after{width:100%}
.ts-module-header:focus-visible{outline:2px solid var(--cyan);outline-offset:2px}
.ts-module-header[aria-expanded="true"]{border-color:rgba(24,220,255,0.52);box-shadow:0 0 22px rgba(24,220,255,0.12),inset 0 0 20px rgba(24,220,255,0.05)}
.ts-module-header .section-head{margin-bottom:0;flex:0 0 auto;font-size:clamp(0.9rem,1.8vw,1.15rem)}
.ts-module-summary{flex:1;min-width:0;font-family:var(--mono);font-size:0.76rem;font-weight:700;color:#8ad8f0;letter-spacing:0.05em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.ts-module-chevron{font-family:var(--mono);font-size:0.8rem;color:var(--cyan);transition:transform .3s;flex:0 0 auto}
.ts-module-header[aria-expanded="true"] .ts-module-chevron{transform:rotate(180deg)}
.ts-module-header[aria-expanded="true"] .ts-module-summary{display:none}
.ts-module-body{overflow:hidden;transition:max-height .5s ease,opacity .4s ease;max-height:0;opacity:0}
.ts-module-body.open{opacity:1}
.ts-module-body>div{padding-top:1rem}
.module-controls{display:flex;justify-content:center;gap:0.8rem;padding:1rem 1.2rem;flex-wrap:wrap;position:relative;overflow:hidden;border:1px solid var(--border);border-radius:14px;background:rgba(3,12,24,0.62)}
.module-controls::before{content:'';position:absolute;top:-1px;left:-90px;width:90px;height:2px;background:linear-gradient(90deg,transparent,var(--tron),var(--cyan));box-shadow:0 0 10px var(--tron);opacity:0.75;animation:moduleCtrlTrace 4.8s linear infinite;pointer-events:none}
.module-ctrl-btn{font-family:var(--mono);font-size:0.7rem;letter-spacing:0.08em;text-transform:uppercase;color:var(--cyan);background:none;border:2px solid rgba(24,220,255,0.35);border-radius:999px;padding:0.45rem 1.05rem;cursor:pointer;transition:all .22s;position:relative;overflow:hidden}
.module-ctrl-btn::before{content:'';position:absolute;top:0;left:-100%;width:65%;height:100%;background:linear-gradient(90deg,transparent,rgba(24,220,255,0.26),transparent);pointer-events:none}
.module-ctrl-btn:hover{border-color:var(--tron);box-shadow:0 0 16px rgba(24,220,255,0.25),0 0 30px rgba(24,220,255,0.09);color:var(--tron)}
.module-ctrl-btn:hover::before{animation:moduleBtnSweep .6s ease-out}
.module-ctrl-btn:focus-visible{outline:2px solid var(--cyan);outline-offset:2px}
.module-ctrl-btn.tron-pulse{animation:moduleCtrlPulse .45s ease-out}
@keyframes moduleCtrlTrace{0%{left:-90px}100%{left:calc(100% + 90px)}}
@keyframes moduleBtnSweep{0%{left:-100%}100%{left:140%}}
@keyframes moduleCtrlPulse{0%{box-shadow:0 0 0 rgba(24,220,255,0)}50%{box-shadow:0 0 22px rgba(24,220,255,0.35),0 0 40px rgba(24,220,255,0.2)}100%{box-shadow:0 0 0 rgba(24,220,255,0)}}

/* ====== SEARCH/FILTER (Phase 2) ====== */
.search-wrap{max-width:480px;margin:0 auto 2rem;position:relative}
.search-input{width:100%;padding:0.7rem 1rem 0.7rem 2.4rem;border-radius:10px;border:1px solid var(--border);background:rgba(5,5,15,0.9);color:var(--cyan);font-family:var(--mono);font-size:0.82rem;transition:border-color .22s,box-shadow .22s;outline:none}
.search-input:focus{border-color:rgba(0,255,204,0.5);box-shadow:0 0 16px rgba(0,255,204,0.1)}
.search-input::placeholder{color:var(--muted);opacity:0.7}
.search-icon{position:absolute;left:0.8rem;top:50%;transform:translateY(-50%);color:var(--muted);font-size:0.9rem;pointer-events:none}

/* ====== ARCHIVES ====== */
.archives-section{padding:3rem 0 4rem}
.archives-text{max-width:680px;margin:0 auto 2rem;font-size:0.92rem;color:var(--text);line-height:1.8}
.archives-text em{color:var(--cyan);font-style:normal}
.vb6-win{max-width:680px;margin:2rem auto;border:1px solid #555;overflow-x:auto;overflow-y:hidden;background:#c0c0c0;box-shadow:2px 2px 0 #555,inset 1px 1px 0 #fff}
.vb6-bar{background:linear-gradient(90deg,#000080,#1084d0);color:#fff;font-family:Tahoma,'MS Sans Serif',sans-serif;font-size:0.78rem;font-weight:700;padding:3px 6px;display:flex;align-items:center;gap:8px}
.vb6-bar::after{content:'\00d7';margin-left:auto;background:#c0c0c0;color:#000;width:16px;height:14px;display:flex;align-items:center;justify-content:center;font-size:0.7rem;border:1px outset #ddd}
.vb6-code{background:#fff;color:#000;font-family:'Courier New',monospace;font-size:0.8rem;padding:0.8rem 1rem;margin:2px;line-height:1.6;overflow-x:auto;white-space:pre}
.vb6-code .kw{color:#0000ff}.vb6-code .cm{color:#008000}.vb6-code .st{color:#a31515}.vb6-code .fn{color:#795e26}
.nfo{max-width:680px;margin:2rem auto;background:#000;border:1px solid var(--cyan);padding:1.5rem 2rem;font-family:'Courier New',monospace;font-size:clamp(0.6rem,1vw,0.78rem);color:var(--cyan);text-shadow:0 0 5px rgba(0,255,204,0.3);line-height:1.4;overflow-x:auto;white-space:pre}

/* ====== RECIPE CARDS ====== */
.recipes-section{padding:3rem 0 4rem}
.recipe-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1.5rem}
@media(max-width:1024px){.recipe-grid{grid-template-columns:repeat(2,1fr)}}
@media(max-width:640px){.recipe-grid{grid-template-columns:1fr}}
.recipe-card{border:1px solid var(--border);border-radius:8px;background:var(--panel);overflow:hidden;transition:transform .35s,box-shadow .35s,border-color .35s;will-change:transform}
.recipe-card:hover{transform:translateY(-6px);border-color:var(--cyan);box-shadow:0 0 30px rgba(0,255,204,0.1)}
.recipe-header{padding:1rem 1.2rem 0.5rem;border-bottom:1px solid var(--border)}
.recipe-label{font-family:var(--mono);font-size:0.68rem;color:var(--magenta);text-transform:uppercase;letter-spacing:0.1em;margin-bottom:0.3rem}
.recipe-name{font-family:var(--mono);font-size:1.05rem;font-weight:700;color:var(--cyan)}
.recipe-name a{color:inherit;text-decoration:none}.recipe-name a:hover{text-shadow:0 0 8px var(--cyan)}
.recipe-body{padding:1rem 1.2rem}
.recipe-item{margin-bottom:0.7rem}
.recipe-item-label{font-family:var(--mono);font-size:0.7rem;color:var(--amber);text-transform:uppercase;letter-spacing:0.08em;margin-bottom:0.15rem}
.recipe-item-value{font-size:0.86rem;color:var(--text);line-height:1.5}
.recipe-meta{display:flex;gap:0.5rem;padding:0.7rem 1.2rem;border-top:1px solid var(--border);flex-wrap:wrap}

/* ====== PROJECT GRID ====== */
.projects-section{padding:3rem 0 4rem}
.project-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1.2rem}
@media(max-width:1024px){.project-grid{grid-template-columns:repeat(2,1fr)}}
@media(max-width:640px){.project-grid{grid-template-columns:1fr}}
.project-card{background:var(--panel);border:1px solid var(--border);border-radius:8px;overflow:hidden;transition:transform .35s,box-shadow .35s,border-color .35s;will-change:transform;opacity:0;transform:translateY(30px)}
.project-card.visible{opacity:1;transform:translateY(0);transition:opacity .5s,transform .5s,box-shadow .35s,border-color .35s}
.project-card:hover{transform:translateY(-4px) scale(1.01);border-color:var(--tron);box-shadow:0 0 25px rgba(24,220,255,0.12),inset 0 1px 0 rgba(24,220,255,0.1)}
.card-bar{display:flex;align-items:center;gap:6px;padding:0.55rem 0.9rem;background:rgba(0,0,0,0.4);border-bottom:1px solid var(--border)}
.dot{width:9px;height:9px;border-radius:50%}.dot-r{background:#ff5f57}.dot-y{background:#febc2e}.dot-g{background:#28c840}
.card-filename{font-family:var(--mono);font-size:0.72rem;color:var(--muted);margin-left:0.4rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.card-body{padding:1rem 0.9rem 0.6rem}
.card-name{font-family:var(--mono);font-weight:700;font-size:0.95rem;color:var(--text);margin-bottom:0.4rem}
.card-name a{color:inherit;text-decoration:none;transition:color .2s}.card-name a:hover{color:var(--cyan)}
.card-desc{font-size:0.82rem;color:var(--muted);line-height:1.4;min-height:2em;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.card-meta{display:flex;flex-wrap:wrap;gap:0.4rem;padding:0.6rem 0.9rem 0.8rem}
.project-link{display:block;color:inherit;text-decoration:none;height:100%}
.project-link:hover .card-name{color:var(--cyan)}
.pill{font-family:var(--mono);font-size:0.68rem;padding:0.15rem 0.5rem;border-radius:999px;border:1px solid;display:inline-flex;align-items:center;gap:0.25rem}
.pill-stars{border-color:var(--amber);color:var(--amber)}.pill-lang{border-color:var(--green);color:var(--green)}.pill-date{border-color:var(--cyan);color:var(--cyan)}

/* ====== TERMINAL ====== */
.terminal-section{padding:3rem 0 4rem}
.terminal{max-width:720px;margin:0 auto;border-radius:8px;overflow:hidden;border:1px solid var(--border);background:rgba(3,3,8,0.95)}
.term-bar{display:flex;align-items:center;gap:6px;padding:0.6rem 0.9rem;background:rgba(0,0,0,0.6);border-bottom:1px solid var(--border)}
.term-title{font-family:var(--mono);font-size:0.72rem;color:var(--muted);margin-left:0.5rem}
.term-body{padding:1.2rem;font-family:var(--mono);font-size:clamp(0.72rem,1.2vw,0.85rem);color:var(--green);line-height:1.8;min-height:220px}
.term-line{opacity:0;white-space:pre-wrap}.term-line.typed{opacity:1}
.term-line .output{color:var(--muted)}.term-line .hl{color:var(--cyan)}
.term-cursor-end{display:inline-block;width:8px;height:1.1em;background:var(--green);animation:blink 1s step-end infinite;vertical-align:text-bottom}

/* ====== CINEMA ====== */
.cinema-section{padding:3rem 0 4rem}
.cinema-grid{display:grid;grid-template-columns:1fr auto 1fr;gap:2rem;align-items:center;max-width:920px;margin:0 auto}
@media(max-width:768px){.cinema-grid{grid-template-columns:1fr;gap:1.5rem}}
.movie-quote{padding:1.5rem 1.8rem;font-family:var(--mono)}
.movie-quote .qt{font-size:clamp(0.95rem,1.8vw,1.2rem);color:var(--text);font-style:italic;line-height:1.6;margin-bottom:0.7rem}
.movie-quote .src{font-size:0.75rem;color:var(--muted)}.movie-quote .src em{color:var(--cyan);font-style:normal}
.wireframe-wrap{width:160px;height:160px;margin:0 auto}
@media(max-width:768px){.wireframe-wrap{width:120px;height:120px}}
.multimon{max-width:920px;margin:2.5rem auto 0;display:grid;grid-template-columns:repeat(4,1fr);gap:3px;border:2px solid var(--dim);border-radius:4px;overflow:hidden;background:var(--dim)}
@media(max-width:640px){.multimon{grid-template-columns:repeat(2,1fr)}}
.mon{background:#000;padding:0.5rem 0.6rem;font-family:var(--mono);font-size:0.58rem;line-height:1.5;color:var(--green);height:130px;overflow:hidden;position:relative}
.mon::after{content:'';position:absolute;bottom:0;left:0;right:0;height:35px;background:linear-gradient(transparent,#000);pointer-events:none}
.mon.mc{color:var(--cyan)}.mon.mm{color:var(--magenta)}.mon.ma{color:var(--amber)}
.mon-label{font-size:0.5rem;color:var(--muted);margin-bottom:0.25rem;text-transform:uppercase;letter-spacing:0.12em;border-bottom:1px solid var(--dim);padding-bottom:0.2rem}
@keyframes scrollUp{from{transform:translateY(0)}to{transform:translateY(-50%)}}
.mon-scroll{animation:scrollUp 25s linear infinite}

/* ====== HISTORY / INGREDIENTS ====== */
.history-cookbook-section{padding:2.35rem 0 3rem}
.history-intro{max-width:760px;margin:0 auto 1.5rem;font-size:0.9rem;color:var(--text);line-height:1.8}
.history-intro em{color:var(--cyan);font-style:normal}
.ingredients-visual{position:relative;max-width:920px;margin:0 auto 1.6rem;padding:0.55rem;border:1px solid var(--border);border-radius:10px;background:rgba(0,0,0,0.45);overflow:hidden}
.ingredients-visual::after{content:'';position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(24,220,255,0.08),transparent);transform:translateX(-120%);animation:ingSweep 5s linear infinite;pointer-events:none}
@keyframes ingSweep{to{transform:translateX(120%)}}
#ingredientsCanvas{display:block;width:100%;height:150px}
.history-cookbook-section .history-intro,.glossary-section .history-intro{max-width:740px;margin:0 auto 1.05rem;font-size:0.84rem;line-height:1.65}
.ingredient-list{list-style:none;max-width:920px;margin:0 auto;padding:0;display:grid;grid-template-columns:1fr;gap:0.8rem}
.ingredient-card{border:1px solid var(--border);border-radius:8px;background:var(--panel);overflow:hidden;transition:border-color .3s,box-shadow .3s}
.ingredient-card:hover{border-color:rgba(24,220,255,0.35);box-shadow:0 0 25px rgba(24,220,255,0.08)}
.ingredient-head{display:flex;align-items:center;gap:0.5rem;padding:0.62rem 0.85rem;border-bottom:1px solid var(--border);font-family:var(--mono)}
.year-pill{font-size:0.63rem;font-weight:700;color:var(--bg);background:var(--cyan);border-radius:3px;padding:0.14rem 0.38rem}
.ingredient-name{font-size:0.69rem;color:var(--magenta);letter-spacing:0.09em;text-transform:uppercase}
.ingredient-desc{padding:0.72rem 0.85rem 0.32rem;font-size:0.8rem;color:var(--text);line-height:1.58}
.ingredient-code{margin:0.46rem 0.85rem 0.85rem;padding:0.68rem 0.78rem;border-radius:6px;border:1px solid rgba(0,255,204,0.14);background:#05050b;font-family:var(--mono);font-size:0.67rem;line-height:1.5;color:var(--green);overflow-x:auto;white-space:pre}
.ingredient-code .cm{color:var(--muted)}.ingredient-code .kw{color:var(--cyan)}.ingredient-code .tx{color:var(--amber)}.ingredient-code .ok{color:var(--magenta)}

/* ====== LEGEND QUOTES ====== */
.legend-quotes-section{padding:3rem 0 4rem}
.quote-signal{max-width:920px;margin:0 auto 1.3rem;border:1px solid var(--border);border-radius:10px;overflow:hidden;background:rgba(0,0,0,0.38)}
#quoteSignalCanvas{display:block;width:100%;height:130px}
.quote-wall{max-width:920px;margin:0 auto;display:grid;grid-template-columns:repeat(3,1fr);gap:0.9rem}
@media(max-width:1024px){.quote-wall{grid-template-columns:repeat(2,1fr)}}
@media(max-width:640px){.quote-wall{grid-template-columns:1fr}}
.legend-quote-card{position:relative;padding:1rem 1.05rem;border:1px solid var(--border);border-radius:10px;background:linear-gradient(160deg,rgba(8,14,28,0.92),rgba(8,8,20,0.92));overflow:hidden;transition:transform .32s,border-color .3s,box-shadow .3s}
.legend-quote-card::before{content:'';position:absolute;left:-35%;top:0;width:35%;height:100%;background:linear-gradient(90deg,transparent,rgba(24,220,255,0.12),transparent);transform:skewX(-18deg)}
.legend-quote-card:hover{transform:translateY(-4px);border-color:rgba(24,220,255,0.45);box-shadow:0 0 24px rgba(24,220,255,0.11)}
.legend-quote-card.hot{border-color:rgba(0,255,204,0.55);box-shadow:0 0 24px rgba(0,255,204,0.16)}
.legend-quote-card.hot::before{animation:legendSweep 2.8s linear infinite}
@keyframes legendSweep{to{left:140%}}
.lq-text{font-size:0.9rem;color:var(--text);line-height:1.65;font-style:italic}
.lq-meta{margin-top:0.65rem;font-family:var(--mono);font-size:0.68rem;color:var(--magenta);letter-spacing:0.06em;text-transform:uppercase}

/* ====== GLOSSARY ====== */
.glossary-section{padding:2.35rem 0 3rem}
.glossary-grid{max-width:900px;margin:0 auto;display:grid;grid-template-columns:repeat(2,1fr);gap:0.72rem}
@media(max-width:640px){.glossary-grid{grid-template-columns:1fr}}
.term-card{border:1px solid var(--border);border-radius:10px;background:rgba(6,9,17,0.88);padding:0.72rem 0.82rem;transition:border-color .28s,box-shadow .28s,transform .28s}
.term-card:hover{border-color:rgba(24,220,255,0.45);box-shadow:0 0 21px rgba(24,220,255,0.1);transform:translateY(-2px)}
.term-top{display:flex;align-items:center;gap:0.48rem;margin-bottom:0.42rem}
.term-icon{width:1.74rem;height:1.74rem;display:inline-flex;align-items:center;justify-content:center;border-radius:5px;font-family:var(--mono);font-size:0.67rem;border:1px solid;letter-spacing:0.03em}
.ti-malware{color:#ff6b6b;border-color:#ff6b6b}.ti-adware{color:#ffd166;border-color:#ffd166}
.ti-trojan{color:#ff9f1c;border-color:#ff9f1c}.ti-shoulder{color:#b8c0d0;border-color:#b8c0d0}
.ti-phishing{color:#00d4ff;border-color:#00d4ff}.ti-ransom{color:#ff3e3e;border-color:#ff3e3e}
.ti-spyware{color:#8b5cf6;border-color:#8b5cf6}.ti-zeroday{color:#18dcff;border-color:#18dcff}
.ti-botnet{color:#00ff41;border-color:#00ff41}
.term-name{font-family:var(--mono);font-size:0.72rem;color:var(--cyan);text-transform:uppercase;letter-spacing:0.08em}
.term-def{font-size:0.78rem;color:var(--text);line-height:1.5}
.term-visual{margin-top:0.42rem;padding:0.42rem 0.52rem;border-radius:6px;background:#05050b;border:1px solid rgba(0,255,204,0.12);font-family:var(--mono);font-size:0.61rem;color:var(--green);overflow-x:auto}

/* ====== ZINES ====== */
.zines-section{padding:3rem 0 4rem}
.zine-grid{max-width:980px;margin:0 auto;display:grid;grid-template-columns:repeat(3,1fr);gap:0.9rem}
@media(max-width:1024px){.zine-grid{grid-template-columns:repeat(2,1fr)}}
@media(max-width:640px){.zine-grid{grid-template-columns:1fr}}
.zine-card{border:1px solid var(--border);border-radius:10px;background:rgba(7,10,18,0.9);padding:0.9rem 1rem;transition:transform .3s,border-color .3s,box-shadow .3s}
.zine-card:hover{transform:translateY(-3px);border-color:rgba(24,220,255,0.4);box-shadow:0 0 22px rgba(24,220,255,0.12)}
.zine-head{display:flex;justify-content:space-between;gap:0.5rem;align-items:center;margin-bottom:0.45rem}
.zine-rank{font-family:var(--mono);font-size:0.67rem;color:var(--magenta)}
.zine-cat{font-family:var(--mono);font-size:0.62rem;color:var(--amber);text-transform:uppercase;letter-spacing:0.08em}
.zine-name{font-family:var(--mono);font-size:0.95rem;color:var(--cyan);margin-bottom:0.35rem}
.zine-name a{color:inherit;text-decoration:none}.zine-name a:hover{text-shadow:0 0 8px var(--cyan)}
.zine-desc{font-size:0.82rem;color:var(--text);line-height:1.55}

/* ====== FOOTER ====== */
footer{text-align:center;padding:2rem 1rem 2.3rem;font-size:0.74rem;color:var(--muted);border-top:1px solid var(--border);font-family:var(--mono)}
footer p{max-width:980px;margin:0.25rem auto;line-height:1.65}
footer .foot-main{color:var(--text)}
footer .foot-sub{font-size:0.69rem;color:var(--muted)}
footer a{color:var(--cyan);text-decoration:none}footer a:hover{text-decoration:underline}

/* ====== EFFECTS TOASTS (Phase 6) ====== */
.fx-toast-container{position:fixed;bottom:clamp(0.8rem,2.5vw,1.4rem);right:clamp(0.8rem,2.5vw,1.4rem);z-index:11000;display:flex;flex-direction:column-reverse;gap:0.5rem;pointer-events:none;max-width:min(400px,calc(100vw - 2rem))}
.fx-toast{pointer-events:auto;background:linear-gradient(140deg,rgba(8,14,28,0.94),rgba(8,8,20,0.94));border:1px solid rgba(0,255,204,0.22);border-radius:10px;padding:0.7rem 0.9rem;display:flex;align-items:flex-start;gap:0.6rem;font-family:var(--mono);font-size:0.72rem;color:var(--text);line-height:1.45;box-shadow:0 0 20px rgba(0,255,204,0.06);transform:translateX(110%);opacity:0;transition:transform .35s ease,opacity .35s ease;position:relative;overflow:hidden}
.fx-toast.show{transform:translateX(0);opacity:1}
.fx-toast::before{content:'';position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(24,220,255,0.1),transparent);transform:translateX(-120%);animation:fxSweep 3s linear infinite;pointer-events:none}
@keyframes fxSweep{to{transform:translateX(120%)}}
.fx-toast-icon{flex:0 0 auto;color:var(--tron);font-size:0.9rem}
.fx-toast-body{flex:1;min-width:0}
.fx-toast-label{font-size:0.56rem;letter-spacing:0.12em;text-transform:uppercase;color:var(--magenta);margin-bottom:0.15rem}
.fx-toast-msg{color:var(--text)}
.fx-toast-close{flex:0 0 auto;background:none;border:none;color:var(--muted);cursor:pointer;font-size:1rem;padding:0 0.2rem;line-height:1}
.fx-toast-close:hover{color:var(--text)}
.fx-toast-close:focus-visible{outline:2px solid var(--cyan);outline-offset:2px}

/* ====== PUZZLE AREAS (Phase 7) ====== */
.puzzle-unlock-area{margin:1.5rem 0;border:1px dashed rgba(0,255,204,0.2);border-radius:10px;padding:1.2rem;text-align:center;background:rgba(0,0,0,0.2)}
.puzzle-unlock-area.solved{border-style:solid;border-color:rgba(0,255,204,0.3);background:rgba(0,255,204,0.03)}
.puzzle-title{font-family:var(--mono);font-size:0.82rem;color:var(--cyan);margin-bottom:0.5rem;text-transform:uppercase;letter-spacing:0.08em}
.puzzle-desc{font-size:0.78rem;color:var(--muted);margin-bottom:0.8rem}
.puzzle-content{display:none}
.puzzle-unlock-area.solved .puzzle-content{display:block}
.puzzle-unlock-area.solved .puzzle-game{display:none}
.puzzle-solved-badge{display:none;font-family:var(--mono);font-size:0.68rem;color:var(--green);margin-bottom:0.5rem}
.puzzle-unlock-area.solved .puzzle-solved-badge{display:block}
/* Puzzle A: checksum grid */
.checksum-grid{display:grid;grid-template-columns:repeat(6,minmax(36px,44px));gap:4px;justify-content:center;margin:0.8rem 0}
.checksum-cell{width:100%;aspect-ratio:1;border:1px solid var(--border);border-radius:6px;background:rgba(5,5,15,0.9);color:var(--text);font-family:var(--mono);font-size:0.82rem;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;user-select:none}
.checksum-cell:hover{border-color:rgba(24,220,255,0.4)}
.checksum-cell:focus-visible{outline:2px solid var(--cyan);outline-offset:2px}
.checksum-cell.hint{box-shadow:0 0 8px rgba(0,255,204,0.25);border-color:rgba(0,255,204,0.4)}
.checksum-cell.selected{background:rgba(0,255,204,0.15);border-color:var(--cyan);color:var(--cyan)}
.checksum-cell.wrong{background:rgba(255,62,62,0.15);border-color:var(--red)}
.checksum-status{font-family:var(--mono);font-size:0.68rem;color:var(--muted);text-align:center;margin-top:0.5rem;min-height:1.2em}
/* Puzzle B: pattern match */
.pattern-options{display:flex;gap:0.6rem;justify-content:center;flex-wrap:wrap;margin:0.8rem 0}
.pattern-opt{border:1px solid var(--border);border-radius:10px;background:rgba(5,5,15,0.9);padding:0.6rem 1rem;font-family:var(--mono);font-size:0.78rem;color:var(--text);cursor:pointer;transition:all .2s;min-width:100px;text-align:center}
.pattern-opt:hover{border-color:rgba(24,220,255,0.4);transform:translateY(-2px)}
.pattern-opt:focus-visible{outline:2px solid var(--cyan);outline-offset:2px}
.pattern-opt.correct{border-color:var(--green);background:rgba(0,255,65,0.1);color:var(--green)}
.pattern-opt.wrong{border-color:var(--red);background:rgba(255,62,62,0.1);color:var(--red)}
/* Puzzle C: decrypt slider */
.decrypt-dials{display:flex;gap:1rem;justify-content:center;align-items:center;margin:0.8rem 0;flex-wrap:wrap}
.dial-group{display:flex;flex-direction:column;align-items:center;gap:0.3rem}
.dial-label{font-family:var(--mono);font-size:0.6rem;color:var(--muted);text-transform:uppercase}
.dial-input{width:60px;text-align:center;padding:0.4rem;border-radius:8px;border:1px solid var(--border);background:rgba(5,5,15,0.9);color:var(--cyan);font-family:var(--mono);font-size:0.9rem;outline:none}
.dial-input:focus{border-color:rgba(0,255,204,0.5);box-shadow:0 0 12px rgba(0,255,204,0.1)}
.dial-target{font-family:var(--mono);font-size:0.78rem;color:var(--amber);margin-bottom:0.5rem}
/* Puzzle D: port scan */
.port-scan-row{display:flex;gap:0.6rem;justify-content:center;align-items:center;margin:0.8rem 0;flex-wrap:wrap}
.port-btn{border:1px solid var(--border);border-radius:10px;background:rgba(5,5,15,0.9);padding:0.6rem 1rem;font-family:var(--mono);font-size:0.78rem;color:var(--muted);cursor:pointer;transition:all .2s;min-width:72px;text-align:center}
.port-btn:hover{border-color:rgba(24,220,255,0.4);color:var(--text)}
.port-btn:focus-visible{outline:2px solid var(--cyan);outline-offset:2px}
.port-btn.open{border-color:var(--green);background:rgba(0,255,65,0.12);color:var(--green);box-shadow:0 0 8px rgba(0,255,65,0.2)}
.port-target{font-family:var(--mono);font-size:0.78rem;color:var(--amber);margin-bottom:0.5rem}

/* ====== SETTINGS PANEL (Phase 9) ====== */
.settings-overlay{position:fixed;inset:0;z-index:15000;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.55);backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px)}
.settings-overlay.open{display:flex}
.settings-panel{width:min(440px,calc(100vw - 2rem));max-height:80vh;overflow-y:auto;border-radius:16px;border:1px solid rgba(24,220,255,0.22);background:linear-gradient(160deg,rgba(8,14,28,0.96),rgba(8,8,20,0.94));box-shadow:0 0 60px rgba(0,255,204,0.06);padding:1.5rem}
.settings-title{font-family:var(--mono);font-size:1rem;font-weight:700;color:var(--cyan);margin-bottom:1rem;text-transform:uppercase;letter-spacing:0.1em}
.settings-group{margin-bottom:1rem}
.settings-group-label{font-family:var(--mono);font-size:0.68rem;color:var(--magenta);text-transform:uppercase;letter-spacing:0.1em;margin-bottom:0.5rem}
.settings-row{display:flex;align-items:center;justify-content:space-between;padding:0.5rem 0;border-bottom:1px solid var(--border)}
.settings-row-label{font-family:var(--mono);font-size:0.76rem;color:var(--text)}
.settings-toggle{position:relative;width:36px;height:20px;border-radius:10px;border:1px solid var(--border);background:rgba(5,5,15,0.9);cursor:pointer;transition:all .22s}
.settings-toggle::after{content:'';position:absolute;top:2px;left:2px;width:14px;height:14px;border-radius:50%;background:var(--muted);transition:all .22s}
.settings-toggle.on{border-color:var(--cyan);background:rgba(0,255,204,0.15)}
.settings-toggle.on::after{left:18px;background:var(--cyan)}
.settings-toggle:focus-visible{outline:2px solid var(--cyan);outline-offset:2px}
.settings-btn-action{font-family:var(--mono);font-size:0.68rem;padding:0.35rem 0.8rem;border-radius:999px;border:1px solid var(--border);background:rgba(5,5,15,0.9);color:var(--text);cursor:pointer;transition:all .22s}
.settings-btn-action:hover{border-color:var(--cyan);color:var(--cyan)}
.settings-btn-action:focus-visible{outline:2px solid var(--cyan);outline-offset:2px}
.settings-close{position:absolute;top:1rem;right:1rem;background:none;border:none;color:var(--muted);font-size:1.2rem;cursor:pointer}
.settings-close:hover{color:var(--text)}

/* ====== CYBER PUZZLE (existing bottom reveal) ====== */
.cb-bottom-sentinel{height:1px}
.cb-toast{position:fixed;right:clamp(0.8rem,2.5vw,1.4rem);bottom:clamp(0.8rem,2.5vw,1.4rem);z-index:11000;width:min(420px,calc(100vw - 2rem));background:linear-gradient(140deg,rgba(8,14,28,0.92),rgba(8,8,20,0.92));border:1px solid rgba(0,255,204,0.22);border-radius:12px;overflow:hidden;box-shadow:0 0 22px rgba(0,255,204,0.08);transform:translateY(16px);opacity:0;pointer-events:none;transition:transform .38s ease,opacity .38s ease;contain:layout paint style}
.cb-toast.on{transform:translateY(0);opacity:1;pointer-events:auto}
.cb-toast::before{content:'';position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(24,220,255,0.12),transparent);transform:translateX(-120%);animation:cbSweep 3.8s linear infinite}
@keyframes cbSweep{to{transform:translateX(120%)}}
.cb-toast-inner{position:relative;padding:0.95rem 1rem 0.9rem;display:flex;gap:0.85rem;align-items:flex-start}
.cb-toast-icon{width:34px;height:34px;border-radius:10px;flex:0 0 auto;border:1px solid rgba(24,220,255,0.35);background:rgba(0,0,0,0.35);box-shadow:0 0 18px rgba(24,220,255,0.08) inset;display:flex;align-items:center;justify-content:center;font-family:var(--mono);color:var(--tron);text-shadow:0 0 10px rgba(24,220,255,0.35)}
.cb-toast-title{font-family:var(--mono);font-size:0.74rem;letter-spacing:0.12em;text-transform:uppercase;color:var(--magenta);margin-bottom:0.2rem}
.cb-toast-desc{font-size:0.82rem;color:var(--text);line-height:1.45}
.cb-toast-actions{display:flex;gap:0.55rem;margin-top:0.7rem;flex-wrap:wrap}
.cb-mini-btn{border:1px solid rgba(0,255,204,0.26);background:rgba(2,9,18,0.85);color:var(--cyan);font-family:var(--mono);font-size:0.66rem;letter-spacing:0.06em;text-transform:uppercase;padding:0.45rem 0.7rem;border-radius:999px;cursor:pointer;transition:transform .18s,border-color .22s,box-shadow .22s}
.cb-mini-btn:hover{transform:translateY(-1px);border-color:var(--cyan);box-shadow:0 0 12px rgba(0,255,204,0.16)}
.cb-mini-btn:focus-visible{outline:2px solid var(--cyan);outline-offset:2px}
.cb-mini-btn.secondary{border-color:rgba(24,220,255,0.18);color:var(--tron)}
.cb-mini-btn.secondary:hover{border-color:var(--tron);box-shadow:0 0 12px rgba(24,220,255,0.14)}
.cb-backdrop{position:fixed;inset:0;z-index:12000;display:none;align-items:center;justify-content:center;padding:clamp(0.9rem,3vw,2rem);background:rgba(0,0,0,0.55);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}
.cb-backdrop.on{display:flex}
.cb-modal{width:min(960px,100%);max-height:min(86vh,820px);overflow:hidden;border-radius:16px;border:1px solid rgba(24,220,255,0.22);background:linear-gradient(160deg,rgba(8,14,28,0.96),rgba(8,8,20,0.94));box-shadow:0 0 60px rgba(0,255,204,0.06);transform:translateY(16px) scale(0.985);opacity:0;transition:transform .35s ease,opacity .35s ease;will-change:transform,opacity;contain:layout paint style}
.cb-backdrop.on .cb-modal{transform:translateY(0) scale(1);opacity:1}
.cb-modal::before{content:'';position:absolute;inset:0;pointer-events:none;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,0.05) 2px,rgba(0,0,0,0.05) 4px);opacity:0.55}
.cb-modal::after{content:'';position:absolute;left:-35%;top:0;width:35%;height:100%;pointer-events:none;background:linear-gradient(90deg,transparent,rgba(24,220,255,0.16),transparent);transform:skewX(-18deg);animation:cbSweep2 3.2s linear infinite}
@keyframes cbSweep2{to{left:140%}}
.cb-head{position:relative;z-index:1;display:flex;align-items:center;gap:0.8rem;padding:0.95rem 1.1rem;border-bottom:1px solid rgba(0,255,204,0.12);background:rgba(0,0,0,0.35)}
.cb-head-title{flex:1;min-width:0}
.cb-kicker{font-family:var(--mono);font-size:0.62rem;letter-spacing:0.28em;text-transform:uppercase;color:var(--magenta)}
.cb-title{font-family:var(--mono);font-size:1.02rem;font-weight:800;color:var(--cyan);letter-spacing:0.06em;margin-top:0.18rem;text-shadow:0 0 10px rgba(0,255,204,0.25)}
.cb-close{border:1px solid rgba(24,220,255,0.22);background:rgba(2,9,18,0.85);color:var(--tron);width:40px;height:36px;border-radius:10px;cursor:pointer;transition:transform .18s,border-color .22s}
.cb-close:hover{transform:translateY(-1px);border-color:var(--tron)}
.cb-close:focus-visible{outline:2px solid var(--cyan);outline-offset:2px}
.cb-body{position:relative;z-index:1;display:grid;grid-template-columns:1.15fr 1fr;gap:1rem;padding:1rem 1.1rem 1.1rem;overflow:auto;max-height:calc(min(86vh,820px) - 70px)}
@media(max-width:860px){.cb-body{grid-template-columns:1fr}}
.cb-panel{border:1px solid rgba(0,255,204,0.12);border-radius:12px;background:rgba(0,0,0,0.28);overflow:hidden}
.cb-panel-h{display:flex;align-items:center;justify-content:space-between;gap:0.6rem;padding:0.7rem 0.85rem;border-bottom:1px solid rgba(0,255,204,0.1);font-family:var(--mono);font-size:0.68rem}
.cb-panel-h .l{color:var(--amber);letter-spacing:0.08em;text-transform:uppercase}
.cb-panel-h .r{color:var(--muted)}
.cb-code{padding:0.85rem 0.9rem;font-family:var(--mono);font-size:0.73rem;line-height:1.65;color:var(--green);white-space:pre-wrap;word-break:break-word}
.cb-code .dim{color:var(--muted)}
.cb-console{padding:0.85rem 0.9rem}
.cb-step{display:flex;gap:0.6rem;align-items:flex-start;margin-bottom:0.7rem}
.cb-step-num{width:26px;height:26px;border-radius:8px;flex:0 0 auto;border:1px solid rgba(0,255,204,0.22);background:rgba(0,255,204,0.08);display:flex;align-items:center;justify-content:center;font-family:var(--mono);font-size:0.7rem;color:var(--cyan)}
.cb-step-text{flex:1;min-width:0}
.cb-step-text b{color:var(--cyan);font-family:var(--mono);font-size:0.74rem;letter-spacing:0.06em;text-transform:uppercase}
.cb-step-text p{margin-top:0.2rem;font-size:0.82rem;color:var(--text);line-height:1.45}
.cb-field{margin-top:0.75rem}
.cb-field label{display:block;font-family:var(--mono);font-size:0.68rem;letter-spacing:0.1em;text-transform:uppercase;color:var(--magenta);margin-bottom:0.4rem}
.cb-input{width:100%;padding:0.78rem 0.9rem;border-radius:10px;outline:none;background:#05050b;border:1px solid rgba(24,220,255,0.18);color:var(--cyan);font-family:var(--mono);font-size:0.78rem;transition:border-color .22s,box-shadow .22s}
.cb-input:focus{border-color:rgba(0,255,204,0.65);box-shadow:0 0 16px rgba(0,255,204,0.14)}
.cb-tools{display:flex;gap:0.55rem;flex-wrap:wrap;margin-top:0.75rem}
.cb-out{margin-top:0.75rem;border:1px solid rgba(0,255,204,0.12);border-radius:10px;background:rgba(0,0,0,0.28);padding:0.75rem 0.85rem;font-family:var(--mono);font-size:0.72rem;line-height:1.6;color:var(--text)}
.cb-out .ok{color:var(--green)}.cb-out .warn{color:var(--amber)}.cb-out .bad{color:var(--red)}.cb-out .hl{color:var(--cyan)}
.cb-fp{margin-top:0.55rem;color:var(--muted);font-family:var(--mono);font-size:0.68rem}
.cb-contact{margin-top:0.8rem;padding-top:0.8rem;border-top:1px dashed rgba(24,220,255,0.2)}
.cb-contact .cb-out{margin-top:0.55rem}
.cb-body::-webkit-scrollbar{width:10px}
.cb-body::-webkit-scrollbar-track{background:rgba(0,0,0,0.22)}
.cb-body::-webkit-scrollbar-thumb{background:rgba(24,220,255,0.18);border-radius:10px}

/* ====== UTILITIES ====== */
.reveal{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}.reveal.visible{opacity:1;transform:translateY(0)}
.loading-msg{text-align:center;font-family:var(--mono);color:var(--muted);font-size:0.85rem;padding:3rem 0;grid-column:1/-1}
@keyframes spin{to{transform:rotate(360deg)}}
.spinner{display:inline-block;width:18px;height:18px;border:2px solid var(--dim);border-top-color:var(--cyan);border-radius:50%;animation:spin .8s linear infinite;margin-right:0.5rem;vertical-align:middle}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}

/* ====== RESPONSIVE ====== */
@media(max-width:860px){
  .top-bar{padding:0.38rem 0.42rem 0.44rem;gap:0.36rem}
  .music-btns{gap:0.34rem}
  .music-btn{padding:0.42rem 0.5rem 0.46rem}
  .music-track{font-size:0.52rem}
  .music-vibe{font-size:0.46rem}
}
@media(max-width:640px){
  .hero{padding:9.2rem 0 2rem}.hero-inner{padding:1.8rem 1.2rem}
  .glitch{font-size:clamp(2.2rem,10vw,3.2rem)}
  .top-bar-wrap{top:0.3rem;padding:0 0.36rem}
  .top-bar{border-radius:12px;padding:0.38rem 0.34rem 0.4rem;gap:0.28rem}
  .top-bar-label{font-size:0.46rem;letter-spacing:0.12em}
  .music-btns{gap:0.24rem}
  .music-btn{min-height:44px;padding:0.34rem 0.18rem 0.38rem;gap:0.26rem;flex-direction:column;justify-content:center;text-align:center}
  .music-name{align-items:center;text-align:center;gap:1px}
  .music-track{font-size:0.49rem}
  .music-vibe{font-size:0.42rem;letter-spacing:0.07em}
  .music-eq{height:16px;min-width:24px}
  .music-eq span{width:2px}
  .music-meta{justify-content:center;gap:0.26rem 0.5rem;padding:0.02rem 0.1rem 0}
  .music-status,.music-fallback{font-size:0.5rem}
  .quote-block{padding:1.2rem}
  .vb6-code{font-size:0.68rem}.nfo{font-size:0.55rem;padding:1rem}
  .btn{min-height:44px;padding:0.75rem 1.6rem;display:inline-flex;align-items:center;justify-content:center}
  .mon{height:100px;font-size:0.52rem}
  #quoteSignalCanvas{height:110px}
  #ingredientsCanvas{height:130px}
  .history-cookbook-section,.glossary-section{padding:1.8rem 0 2.2rem}
  .history-cookbook-section .history-intro,.glossary-section .history-intro{font-size:0.78rem;line-height:1.5;margin-bottom:0.82rem}
  .ingredient-list{gap:0.62rem}
  .ingredient-head{padding:0.54rem 0.72rem}
  .ingredient-name{font-size:0.64rem;letter-spacing:0.08em}
  .ingredient-desc{padding:0.62rem 0.72rem 0.18rem;font-size:0.74rem;line-height:1.45}
  .ingredient-code{margin:0.34rem 0.72rem 0.72rem;padding:0.58rem 0.62rem;font-size:0.58rem;line-height:1.4}
  .glossary-grid{gap:0.58rem}
  .term-card{padding:0.62rem 0.66rem}
  .term-icon{width:1.5rem;height:1.5rem;font-size:0.58rem}
  .term-name{font-size:0.64rem}
  .term-def{font-size:0.72rem;line-height:1.42}
  .term-visual{font-size:0.56rem;padding:0.34rem 0.44rem}
  .ts-module-header{padding:0.6rem 0.8rem;gap:0.5rem}
  .ts-module-summary{font-size:0.62rem}
  .fx-toast-container{right:0.5rem;bottom:0.5rem;max-width:calc(100vw - 1rem)}
  .checksum-grid{grid-template-columns:repeat(6,minmax(32px,40px))}
}

/* ====== REDUCED MOTION ====== */
@media(prefers-reduced-motion:reduce){
  html{scroll-behavior:auto}
  *,*::before,*::after{animation-duration:0.01ms !important;animation-iteration-count:1 !important;transition-duration:0.01ms !important}
  .cb-toast,.cb-modal,.fx-toast,.ts-module-body{transition:none}
  .cb-toast::before,.cb-modal::after,.fx-toast::before,.top-bar::before,.glass::before,.ingredients-visual::after{animation:none}
  .module-controls::before,.module-ctrl-btn::before{animation:none;display:none}
  .module-ctrl-btn.tron-pulse{animation:none}
  .ts-module-header:hover{transform:none}
  .sweep,.mon-scroll{animation:none}
  .glitch::before,.glitch::after{animation:none;display:none}
  #rainCanvas{display:none}
}
</style>
</head>
<body>

<!-- ====== BOOT SCREEN ====== -->
<div id="bootScreen" class="boot" role="status" aria-live="polite"><div id="bootLog"></div></div>

<!-- ====== BACKGROUND LAYERS ====== -->
<div class="crt" aria-hidden="true"></div>
<div class="sweep" aria-hidden="true"></div>
<div class="ambient" aria-hidden="true"></div>
<div class="tron-grid" aria-hidden="true"></div>
<canvas id="particleCanvas" aria-hidden="true"></canvas>
<canvas id="rainCanvas" aria-hidden="true"></canvas>

<!-- ====== EFFECTS TOAST CONTAINER ====== -->
<div class="fx-toast-container" id="fxToastContainer" aria-live="polite"></div>

<!-- ====== SETTINGS OVERLAY ====== -->
<div class="settings-overlay" id="settingsOverlay" role="dialog" aria-modal="true" aria-label="Settings">
  <div class="settings-panel" style="position:relative">
    <button class="settings-close" id="settingsClose" aria-label="Close settings">&times;</button>
    <div class="settings-title">&#9881; Settings</div>
    <div class="settings-group">
      <div class="settings-group-label">Display</div>
      <div class="settings-row"><span class="settings-row-label">AI Defense Effects</span><button class="settings-toggle" id="settingEffects" role="switch" aria-checked="true" aria-label="Toggle effects"></button></div>
      <div class="settings-row"><span class="settings-row-label">Background Animations</span><button class="settings-toggle on" id="settingBgAnim" role="switch" aria-checked="true" aria-label="Toggle background animations"></button></div>
    </div>
    <div class="settings-group">
      <div class="settings-group-label">Puzzles</div>
      <div class="settings-row"><span class="settings-row-label">Reset All Puzzles</span><button class="settings-btn-action" id="settingResetPuzzles">Reset</button></div>
    </div>
    <div class="settings-group">
      <div class="settings-group-label">Data</div>
      <div class="settings-row"><span class="settings-row-label">Dev Mode (force fallback)</span><button class="settings-toggle" id="settingDevMode" role="switch" aria-checked="false" aria-label="Toggle dev mode"></button></div>
    </div>
  </div>
</div>

<div class="page-wrap">

  <!-- ====== TOP CONTROL BAR ====== -->
  <div class="top-bar-wrap" aria-label="Controls">
    <div class="top-bar">
      <span class="top-bar-label">signal deck // tron &middot; mr robot &middot; swordfish</span>
      <div class="music-controls-row">
        <button type="button" class="music-mute-btn" id="musicMute" aria-label="Mute audio" title="Mute/Unmute">&#x1f50a;</button>
        <div class="music-btns" id="musicDeck">
          <button type="button" class="music-btn" data-theme="tron" data-index="0" data-label="Tron — Spoken Words" aria-pressed="false">
            <span class="music-eq" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span></span>
            <span class="music-name"><span class="music-track">TRON // SPOKEN WORDS</span><span class="music-vibe">Wendy Carlos &middot; 1982 synth grid</span></span>
          </button>
          <button type="button" class="music-btn" data-theme="robot" data-index="1" data-label="Mr Robot — Daemons" aria-pressed="false">
            <span class="music-eq" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span></span>
            <span class="music-name"><span class="music-track">MR ROBOT // DAEMONS</span><span class="music-vibe">Mac Quayle &middot; terminal noise</span></span>
          </button>
          <button type="button" class="music-btn" data-theme="swordfish" data-index="2" data-label="Swordfish — Breach" aria-pressed="false">
            <span class="music-eq" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span><span></span></span>
            <span class="music-name"><span class="music-track">SWORDFISH // BREACH</span><span class="music-vibe">Paul Oakenfold &middot; multi-screen rush</span></span>
          </button>
        </div>
      </div>
      <div class="music-meta">
        <span class="music-status" id="musicStatus" aria-live="polite">select a track</span>
        <button type="button" class="music-next-btn" id="musicNext" aria-label="Next track">next &#9193;</button>
        <a id="musicFallback" class="music-fallback" href="#" target="_blank" rel="noopener noreferrer" hidden>open source</a>
      </div>
      <div id="autoplayBanner" class="autoplay-banner" role="button" tabindex="0" aria-label="Tap to play audio">&#127925; Audio ready &mdash; tap to play</div>
      <div class="top-toggles">
        <button type="button" class="top-toggle-btn on" id="toggleEffects" aria-label="Toggle AI defense effects">Effects: On</button>
        <button type="button" class="top-toggle-btn settings-btn" id="toggleSettings" aria-label="Open settings">&#9881; Settings</button>
      </div>
      <audio id="musicPlayer" preload="none"></audio>
    </div>
  </div>

  <!-- ====== HERO ====== -->
  <header class="hero" role="banner">
    <div class="hero-inner glass">
      <p class="eyebrow">THUMPERSECURE</p>
      <h1 class="glitch" data-text="CODE COOKBOOK">CODE COOKBOOK</h1>
      <p class="hero-sub">// OSINT &amp; SEO SPECIALIST</p>
      <div class="typer-wrap" aria-live="polite"><span id="typerText"></span><span class="typer-cursor"></span></div>
      <nav class="hero-btns" aria-label="Primary navigation">
        <a href="#recipes" class="btn btn-primary">ACCESS GRANTED</a>
        <a href="https://github.com/thumpersecure" class="btn btn-ghost" target="_blank" rel="noopener noreferrer">GitHub Profile</a>
      </nav>
    </div>
  </header>

  <main>

    <!-- ====== STATS ====== -->
    <section class="stats-section reveal" aria-label="Statistics">
      <div class="container">
        <div class="stats-inner">
          <div class="stat-item"><span class="stat-label">tools:</span><span class="stat-val" id="statProjects">0</span></div>
          <span class="stat-sep">|</span>
          <div class="stat-item"><span class="stat-label">stars:</span><span class="stat-val" id="statStars">0</span></div>
          <span class="stat-sep">|</span>
          <div class="stat-item"><span class="stat-label">featured:</span><span class="stat-val" id="statFeatured">0</span></div>
          <span class="stat-sep">|</span>
          <div class="stat-item"><span class="stat-label">followers:</span><span class="stat-val" id="statFollowers">0</span></div>
        </div>
        <div class="data-status" id="dataStatus" aria-live="polite">loading snapshot&hellip;</div>
      </div>
    </section>

    <!-- ====== MODULE CONTROLS ====== -->
    <div class="module-controls">
      <button type="button" class="module-ctrl-btn" id="expandAllBtn" aria-label="Expand all modules">&#9660; Expand All</button>
      <button type="button" class="module-ctrl-btn" id="collapseAllBtn" aria-label="Collapse all modules">&#9650; Collapse All</button>
      <span id="moduleCtrlStatus" class="sr-only" aria-live="polite"></span>
    </div>

    <div class="ascii-div" aria-hidden="true">&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;</div>

    <!-- ====== MODULE: CINEMA ====== -->
    <section class="ts-module reveal" aria-label="Cinema references" id="mod-cinema">
      <button class="ts-module-header" aria-expanded="false" aria-controls="mod-cinema-body">
        <h2 class="section-head"><span>//</span> cinema</h2>
        <p class="ts-module-summary">Movie quotes and wireframe references from Hackers, Tron, and Swordfish.</p>
        <span class="ts-module-chevron" aria-hidden="true">&#9660;</span>
      </button>
      <div class="ts-module-body" id="mod-cinema-body"><div>
        <div class="container cinema-section">
          <div class="cinema-grid">
            <blockquote class="movie-quote glass">
              <p class="qt">"Hack the planet!"</p>
              <div class="src">&mdash; Dade Murphy / Zero Cool<br><em>Hackers</em> (1995)</div>
            </blockquote>
            <div class="wireframe-wrap"><canvas id="wireframeCanvas" aria-hidden="true"></canvas></div>
            <blockquote class="movie-quote glass">
              <p class="qt">"War isn't about who's right. It's about who's left."</p>
              <div class="src">&mdash; Gabriel Shear<br><em>Swordfish</em> (2001)</div>
            </blockquote>
          </div>
          <div class="multimon" aria-label="Multi-monitor display inspired by Swordfish">
            <div class="mon"><div class="mon-label">gibson.sys</div><div class="mon-scroll" id="mon1"></div></div>
            <div class="mon mc"><div class="mon-label">net.trace</div><div class="mon-scroll" id="mon2"></div></div>
            <div class="mon mm"><div class="mon-label">crypto.dec</div><div class="mon-scroll" id="mon3"></div></div>
            <div class="mon ma"><div class="mon-label">swordfish</div><div class="mon-scroll" id="mon4"></div></div>
          </div>
        </div>
      </div></div>
    </section>

    <div class="ascii-div" aria-hidden="true">&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;</div>

    <!-- ====== MODULE: ARCHIVES ====== -->
    <section class="ts-module reveal" aria-label="The Archives" id="mod-archives">
      <button class="ts-module-header" aria-expanded="false" aria-controls="mod-archives-body">
        <h2 class="section-head"><span>//</span> the_archives</h2>
        <p class="ts-module-summary">From BBS culture to modern OSINT &mdash; the evolution of tools and ethics.</p>
        <span class="ts-module-chevron" aria-hidden="true">&#9660;</span>
      </button>
      <div class="ts-module-body" id="mod-archives-body"><div>
        <div class="container archives-section" id="archives">
          <p class="archives-text">Before OSINT had a name, there were <em>progz</em> and <em>warez</em>. In 1995, a Visual Basic app called <em>AOHell</em> taught an entire generation that software could pry open any system &mdash; and that the line between tool and weapon was drawn by the person holding it. The underground BBS scene, NFO files, and ASCII art weren't just aesthetics &mdash; they were a culture.</p>
          <p class="archives-text">The blueprint came earlier than most realize. In 1982, <em>TRON</em> imagined a world inside the machine &mdash; programs as people, a luminous grid stretching to infinity, identity discs carrying everything you are. <em>"I fight for the users"</em> wasn't just a line; it was a thesis. Then <em>Hackers</em> turned "The Gibson" into a neon fever dream &mdash; wireframe cities, flying through cyberspace, <em>Zero Cool</em> and <em>Acid Burn</em> proving that information wants to be free. In 2001, <em>Swordfish</em> gave us the multi-monitor fantasy: 60 seconds to crack the DOD, screens stacked like weapons, the password always just out of reach. The tech was fiction. The spirit was real.</p>
          <p class="archives-text">Today's OSINT and SEO tools carry that same DNA: <em>information is leverage, and code is the skeleton key.</em></p>
          <div class="vb6-win">
            <div class="vb6-bar">AOHell.frm &mdash; Visual Basic 6</div>
            <pre class="vb6-code"><span class="cm">' &#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;</span>
<span class="cm">' AOHell.frm &mdash; circa 1995</span>
<span class="cm">' The tool that started a generation</span>
<span class="cm">' &#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;</span>

<span class="kw">Private Sub</span> <span class="fn">Form_Load</span>()
    Me.Caption = <span class="st">"AOHell v4.0"</span>
    txtStatus.Text = <span class="st">"Initializing..."</span>
    <span class="kw">Call</span> Winsock1.Connect(target$, 5190)
<span class="kw">End Sub</span>

<span class="kw">Private Sub</span> <span class="fn">cmdExecute_Click</span>()
    <span class="kw">Dim</span> i <span class="kw">As</span> Integer
    <span class="kw">For</span> i = 1 <span class="kw">To</span> 99
        Winsock1.SendData String$(4096, <span class="st">"X"</span>)
    <span class="kw">Next</span> i
    lblStatus.Caption = <span class="st">"Packets sent: "</span> &amp; i
<span class="kw">End Sub</span></pre>
          </div>
          <div class="nfo" aria-label="Warez-style NFO block">&#9556;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9559;
&#9553;          THUMPERSECURE  TOOLKIT              &#9553;
&#9553;          &#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;             &#9553;
&#9553;                                              &#9553;
&#9553;   TYPE  : OSINT / SEO / Privacy              &#9553;
&#9553;   YEAR  : 2026                               &#9553;
&#9553;   TOOLS : <span id="nfoTools">13</span> public repositories             &#9553;
&#9553;   STARS : <span id="nfoStars">541</span>+ and counting                  &#9553;
&#9562;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9565;</div>
          <p class="archives-text" style="margin-top:2rem">From Visual Basic <em>punters</em> to Python OSINT frameworks &mdash; the evolution is clear. The tools changed, the mission didn't: <em>find what's hidden, expose what matters, build what's needed.</em></p>
        </div>
      </div></div>
    </section>

    <div class="ascii-div" aria-hidden="true">&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;</div>

    <!-- ====== MODULE: EVOLUTION ====== -->
    <section class="ts-module reveal" aria-label="Evolution" id="mod-evolution">
      <button class="ts-module-header" aria-expanded="false" aria-controls="mod-evolution-body">
        <h2 class="section-head"><span>//</span> evolution</h2>
        <p class="ts-module-summary">Spin browser versions, palm-tree's Reddit moment, and the Telespot ecosystem.</p>
        <span class="ts-module-chevron" aria-hidden="true">&#9660;</span>
      </button>
      <div class="ts-module-body" id="mod-evolution-body"><div>
        <div class="container archives-section" id="evolution">
          <p class="archives-text" style="margin-bottom:1.5rem"><em>Spin</em> started as a detective-yellow browser and evolved through six major identities &mdash; each themed around a different investigator archetype, each a complete architectural rewrite. The version history reads like a case file:</p>
          <div class="nfo" aria-label="Spin Browser version timeline">SPIN BROWSER &mdash; VERSION HISTORY
&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;

v1.0   "Dick Tracy"       &#9472;&#9472; Classic Detective Yellow
v2.0   "Tracey Edition"   &#9472;&#9472; Hollywood Noir
v3.x   "Carmen Sandiego"  &#9472;&#9472; International Red
v4.x   "Exorcist's Edge"  &#9472;&#9472; Electron + Svelte
v5.0   "The Multiple Man" &#9472;&#9472; Tauri + React
v12    "Jessica Jones"    &#9472;&#9472; Pure Rust (iced + wry)

CURRENT: v12.1.3 &mdash; Jessica Jones
STACK:   100% Rust, zero NPM, iced GUI, CEF
TOOLS:   Session cloning, investigation graph,
         24 NATO-alphabet identities, Claude MCP
&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;</div>
          <p class="archives-text" style="margin-top:2rem">From Dick Tracy's yellow trenchcoat to Jessica Jones's whiskey-and-stakeouts PI aesthetic &mdash; every version carried a different investigative personality. The tech stack evolved just as dramatically: vanilla JS to Svelte to React to a zero-NPM pure Rust build. The browser's DNA stayed constant: <em>privacy-first, multi-identity, OSINT-native.</em></p>
          <p class="archives-text"><em>palm-tree</em> proved that one Reddit post can change everything. A traffic noise generator that creates 30+ fake personas browsing in parallel &mdash; the pitch was simple: <em>"Make advertisers cry. Make data brokers confused."</em></p>
          <p class="archives-text">The <em>Telespot ecosystem</em> is five tools that form a complete phone-number OSINT pipeline. It starts with a phone number and ends with actionable intelligence &mdash; or a cleaned digital footprint.</p>
        </div>
      </div></div>
    </section>

    <div class="ascii-div" aria-hidden="true">&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;</div>

    <!-- ====== MODULE: FEATURED RECIPES ====== -->
    <section class="ts-module reveal" aria-label="Featured recipes" id="mod-recipes">
      <button class="ts-module-header" aria-expanded="false" aria-controls="mod-recipes-body">
        <h2 class="section-head"><span>//</span> featured_recipes</h2>
        <p class="ts-module-summary">Top tools: palm-tree, Telespot, Spin, opt-out-manual-2026.</p>
        <span class="ts-module-chevron" aria-hidden="true">&#9660;</span>
      </button>
      <div class="ts-module-body" id="mod-recipes-body"><div>
        <div class="container recipes-section" id="recipes">
          <div class="recipe-grid" id="featuredGrid">
            <div class="loading-msg"><span class="spinner"></span>Loading featured recipes&hellip;</div>
          </div>
          <!-- Puzzle A: Terminal Checksum (opt-in) -->
          <div class="puzzle-unlock-area" id="puzzleA" data-puzzle="checksum">
            <div class="puzzle-solved-badge">&#10003; CHECKSUM VERIFIED</div>
            <div class="puzzle-game">
              <div class="puzzle-title">&#128274; Terminal Checksum Challenge</div>
              <div class="puzzle-desc">Click the 3 highlighted characters in order to form the access code. <button class="cb-mini-btn secondary" style="font-size:0.6rem;padding:0.2rem 0.5rem" onclick="TS.puzzleSkip('checksum')">Skip</button></div>
              <div class="checksum-grid" id="checksumGrid"></div>
              <div class="checksum-status" id="checksumStatus">find the glowing characters</div>
            </div>
            <div class="puzzle-content">
              <p style="font-family:var(--mono);font-size:0.78rem;color:var(--green);line-height:1.6">&#127919; <strong>Extended Note:</strong> palm-tree's original Reddit post generated 139 stars in 48 hours. The secret? A one-line pitch: "If you can't hide, overwhelm." Traffic noise as privacy armor.</p>
            </div>
          </div>
        </div>
      </div></div>
    </section>

    <!-- ====== RECIPE INDEX (always visible, not collapsible) ====== -->
    <section class="projects-section reveal" aria-label="All projects" id="recipe-index-section">
      <div class="container">
        <h2 class="section-head"><span>//</span> recipe_index</h2>
        <div class="search-wrap">
          <span class="search-icon" aria-hidden="true">&#128269;</span>
          <input type="search" class="search-input" id="repoSearch" placeholder="Search recipes by name, language, or keyword&hellip;" aria-label="Search repositories">
        </div>
        <div class="project-grid" id="projectGrid"><div class="loading-msg"><span class="spinner"></span>Loading recipes&hellip;</div></div>
        <!-- Puzzle B: Pattern Match (opt-in) -->
        <div class="puzzle-unlock-area" id="puzzleB" data-puzzle="pattern" style="margin-top:2rem">
          <div class="puzzle-solved-badge">&#10003; PATTERN MATCHED</div>
          <div class="puzzle-game">
            <div class="puzzle-title">&#128274; Pattern Match Challenge</div>
            <div class="puzzle-desc">Which tool "overwhelms trackers with noise"? <button class="cb-mini-btn secondary" style="font-size:0.6rem;padding:0.2rem 0.5rem" onclick="TS.puzzleSkip('pattern')">Skip</button></div>
            <div class="pattern-options" id="patternOptions"></div>
          </div>
          <div class="puzzle-content">
            <p style="font-family:var(--mono);font-size:0.78rem;color:var(--green);line-height:1.6">&#127919; <strong>Easter Egg:</strong> The original Telespot prototype was written in a single weekend. It searched 4 engines simultaneously and correlated phone numbers across all results. 260+ stars across the ecosystem today.</p>
          </div>
        </div>
      </div>
    </section>

    <div class="ascii-div" aria-hidden="true">&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;</div>

    <!-- ====== TERMINAL ====== -->
    <section class="terminal-section reveal" aria-label="Terminal">
      <div class="container">
        <h2 class="section-head"><span>//</span> terminal</h2>
        <div class="terminal">
          <div class="term-bar"><span class="dot dot-r"></span><span class="dot dot-y"></span><span class="dot dot-g"></span><span class="term-title">code-cookbook &mdash; bash</span></div>
          <div class="term-body" id="termBody"></div>
        </div>
      </div>
    </section>

    <div class="ascii-div" aria-hidden="true">&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;</div>

    <!-- ====== MODULE: INGREDIENTS ====== -->
    <section class="ts-module reveal" id="mod-ingredients" aria-label="Historical cookbook ingredients">
      <button class="ts-module-header" aria-expanded="false" aria-controls="mod-ingredients-body">
        <h2 class="section-head"><span>//</span> ingredients_1986_to_2026</h2>
        <p class="ts-module-summary">8 milestones from 1986 dial-up to 2026 async Rust pipelines.</p>
        <span class="ts-module-chevron" aria-hidden="true">&#9660;</span>
      </button>
      <div class="ts-module-body" id="mod-ingredients-body"><div>
        <div class="container history-cookbook-section" id="ingredients">
          <p class="history-intro">The long recipe starts in the floppy-and-dial-up years. From BBS scripts and worm-era wake-up calls to modern async intelligence pipelines, every decade added one more ingredient to today's privacy-first OSINT stack. <em>Same mission, sharper tools.</em></p>
          <div class="ingredients-visual glass" aria-hidden="true"><canvas id="ingredientsCanvas"></canvas></div>
          <ol class="ingredient-list">
            <li class="ingredient-card"><div class="ingredient-head"><span class="year-pill">1986</span><span class="ingredient-name">dial-up bbs foundations</span></div><p class="ingredient-desc">Before web apps and cloud APIs, communities traded code over modems.</p><pre class="ingredient-code"><span class="cm"># modem-era connection ritual</span>
<span class="kw">ATZ</span>
<span class="kw">ATDT</span> <span class="tx">5550137</span>
<span class="ok">CONNECT</span> 2400</pre></li>
            <li class="ingredient-card"><div class="ingredient-head"><span class="year-pill">1988</span><span class="ingredient-name">worm-era secure coding shift</span></div><p class="ingredient-desc">The Morris Worm era highlighted how small C mistakes could scale into systemic incidents.</p><pre class="ingredient-code"><span class="cm">/* unsafe input was common */</span>
<span class="kw">char</span> buf[128];
<span class="kw">fgets</span>(buf, <span class="tx">sizeof(buf)</span>, stdin);</pre></li>
            <li class="ingredient-card"><div class="ingredient-head"><span class="year-pill">1996</span><span class="ingredient-name">network recon mise en place</span></div><p class="ingredient-desc">Whois, DNS, and route mapping became the opening moves.</p><pre class="ingredient-code"><span class="kw">whois</span> <span class="tx">example.com</span>
<span class="kw">nslookup</span> <span class="tx">example.com</span>
<span class="kw">traceroute</span> <span class="tx">example.com</span></pre></li>
            <li class="ingredient-card"><div class="ingredient-head"><span class="year-pill">2001</span><span class="ingredient-name">service fingerprinting era</span></div><p class="ingredient-desc">Nmap became a universal ingredient: ports, service versions, and host hints.</p><pre class="ingredient-code"><span class="kw">nmap</span> -sV -O -Pn <span class="tx">target.example</span></pre></li>
            <li class="ingredient-card"><div class="ingredient-head"><span class="year-pill">2007</span><span class="ingredient-name">input-validation wake-up call</span></div><p class="ingredient-desc">The SQL injection wave made parameterized queries non-negotiable.</p><pre class="ingredient-code"><span class="kw">$stmt</span> = $pdo-&gt;prepare(<span class="tx">'SELECT * FROM users WHERE username = :u'</span>);
<span class="kw">$stmt</span>-&gt;execute([<span class="tx">'u'</span> =&gt; $_GET[<span class="tx">'user'</span>]]);</pre></li>
            <li class="ingredient-card"><div class="ingredient-head"><span class="year-pill">2013</span><span class="ingredient-name">python osint automation</span></div><p class="ingredient-desc">Python + requests normalized repeatable intelligence collection.</p><pre class="ingredient-code"><span class="kw">import</span> requests
r = requests.get(<span class="tx">"https://example.org/public-profile"</span>, timeout=10)
<span class="ok">print</span>(r.status_code, len(r.text))</pre></li>
            <li class="ingredient-card"><div class="ingredient-head"><span class="year-pill">2019</span><span class="ingredient-name">api-first recon pipelines</span></div><p class="ingredient-desc">CLI tools and JSON processors made intelligence assembly composable.</p><pre class="ingredient-code"><span class="kw">curl</span> -s "https://api.github.com/users/thumpersecure/repos?per_page=5" \
  | <span class="kw">jq</span> '.[] | {name, language, stars: .stargazers_count}'</pre></li>
            <li class="ingredient-card"><div class="ingredient-head"><span class="year-pill">2026</span><span class="ingredient-name">async rust intelligence kitchen</span></div><p class="ingredient-desc">Modern tooling prioritizes local execution, typed reliability, and parallel source fusion.</p><pre class="ingredient-code"><span class="kw">let</span> (a, b, c) = tokio::join!(source_a(q), source_b(q), source_c(q));
<span class="kw">let</span> report = fuse(a?, b?, c?);
<span class="ok">println!</span>(<span class="tx">"signals: {}"</span>, report.hits);</pre></li>
          </ol>
          <!-- Puzzle C: Decrypt Slider (opt-in) -->
          <div class="puzzle-unlock-area" id="puzzleC" data-puzzle="decrypt" style="margin-top:2rem">
            <div class="puzzle-solved-badge">&#10003; DECRYPTED</div>
            <div class="puzzle-game">
              <div class="puzzle-title">&#128274; Decrypt Slider Challenge</div>
              <div class="puzzle-desc">Align the 3 hex dials to match the target prefix. <button class="cb-mini-btn secondary" style="font-size:0.6rem;padding:0.2rem 0.5rem" onclick="TS.puzzleSkip('decrypt')">Skip</button></div>
              <div class="dial-target" id="dialTarget">Target: ---</div>
              <div class="decrypt-dials" id="decryptDials">
                <div class="dial-group"><span class="dial-label">Dial A</span><input class="dial-input" type="text" maxlength="2" id="dialA" placeholder="00"></div>
                <div class="dial-group"><span class="dial-label">Dial B</span><input class="dial-input" type="text" maxlength="2" id="dialB" placeholder="00"></div>
                <div class="dial-group"><span class="dial-label">Dial C</span><input class="dial-input" type="text" maxlength="2" id="dialC" placeholder="00"></div>
              </div>
              <button class="cb-mini-btn" style="margin-top:0.5rem" onclick="TS.checkDecrypt()">Verify</button>
              <div class="checksum-status" id="decryptStatus">enter hex values (00-ff)</div>
            </div>
            <div class="puzzle-content">
              <p style="font-family:var(--mono);font-size:0.78rem;color:var(--green);line-height:1.6">&#127919; <strong>Deep Recipe:</strong> The Telespot ecosystem pipeline: Phone &rarr; Telespot CLI (99&#9733;) &rarr; Telespotter Rust (53&#9733;) &rarr; TelespotXX Web (21&#9733;). Extensions: xTELENUMSINT (56&#9733;) + TeleSTOP (34&#9733;). Total: 263 stars across 5 tools.</p>
            </div>
          </div>
        </div>
      </div></div>
    </section>

    <div class="ascii-div" aria-hidden="true">&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;</div>

    <!-- ====== MODULE: LEGEND QUOTES ====== -->
    <section class="ts-module reveal" id="mod-quotes" aria-label="Legend quotes">
      <button class="ts-module-header" aria-expanded="false" aria-controls="mod-quotes-body">
        <h2 class="section-head"><span>//</span> legendary_quotes</h2>
        <p class="ts-module-summary">6 quotes from Torvalds, Hopper, Knuth, Kay, Mitnick, Dijkstra.</p>
        <span class="ts-module-chevron" aria-hidden="true">&#9660;</span>
      </button>
      <div class="ts-module-body" id="mod-quotes-body"><div>
        <div class="container legend-quotes-section" id="quotes">
          <p class="history-intro">A wall of lines that shaped engineering and hacker culture.</p>
          <div class="quote-signal glass" aria-hidden="true"><canvas id="quoteSignalCanvas"></canvas></div>
          <div class="quote-wall" id="legendQuoteWall">
            <article class="legend-quote-card hot"><p class="lq-text">"Talk is cheap. Show me the code."</p><p class="lq-meta">Linus Torvalds &middot; Linux</p></article>
            <article class="legend-quote-card"><p class="lq-text">"The most dangerous phrase in the language is, 'We've always done it this way.'"</p><p class="lq-meta">Grace Hopper &middot; Computing pioneer</p></article>
            <article class="legend-quote-card"><p class="lq-text">"Premature optimization is the root of all evil."</p><p class="lq-meta">Donald Knuth &middot; Computer scientist</p></article>
            <article class="legend-quote-card"><p class="lq-text">"The best way to predict the future is to invent it."</p><p class="lq-meta">Alan Kay &middot; Computer scientist</p></article>
            <article class="legend-quote-card"><p class="lq-text">"The human element is truly security's weakest link."</p><p class="lq-meta">Kevin Mitnick &middot; Security author</p></article>
            <article class="legend-quote-card"><p class="lq-text">"Simplicity is prerequisite for reliability."</p><p class="lq-meta">Edsger W. Dijkstra &middot; Computer scientist</p></article>
          </div>
        </div>
      </div></div>
    </section>

    <div class="ascii-div" aria-hidden="true">&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;</div>

    <!-- ====== MODULE: GLOSSARY ====== -->
    <section class="ts-module reveal" id="mod-glossary" aria-label="Cyber glossary">
      <button class="ts-module-header" aria-expanded="false" aria-controls="mod-glossary-body">
        <h2 class="section-head"><span>//</span> threat_glossary</h2>
        <p class="ts-module-summary">9 threat types from malware to zero-day.</p>
        <span class="ts-module-chevron" aria-hidden="true">&#9660;</span>
      </button>
      <div class="ts-module-body" id="mod-glossary-body"><div>
        <div class="container glossary-section" id="glossary">
          <p class="history-intro">Minimalist field notes for common security terms.</p>
          <div class="glossary-grid">
            <article class="term-card"><div class="term-top"><span class="term-icon ti-malware">MAL</span><span class="term-name">malware</span></div><p class="term-def">Any malicious software built to disrupt systems, steal data, or gain unauthorized control.</p><pre class="term-visual">payload -&gt; execute -&gt; compromise</pre></article>
            <article class="term-card"><div class="term-top"><span class="term-icon ti-adware">ADS</span><span class="term-name">adware</span></div><p class="term-def">Software that injects or forces advertising behavior, often tracking user actions.</p><pre class="term-visual">tracking id -&gt; profile -&gt; ad blast</pre></article>
            <article class="term-card"><div class="term-top"><span class="term-icon ti-trojan">TRJ</span><span class="term-name">trojan</span></div><p class="term-def">A malicious program disguised as legitimate software.</p><pre class="term-visual">looks safe -&gt; install -&gt; hidden run</pre></article>
            <article class="term-card"><div class="term-top"><span class="term-icon ti-shoulder">EYE</span><span class="term-name">shoulder surfing</span></div><p class="term-def">Stealing credentials by visually observing someone entering sensitive info.</p><pre class="term-visual">user -&gt; screen &lt;- observer</pre></article>
            <article class="term-card"><div class="term-top"><span class="term-icon ti-phishing">PHI</span><span class="term-name">phishing</span></div><p class="term-def">Social engineering messages that imitate trusted brands to trick targets.</p><pre class="term-visual">inbox -&gt; fake login -&gt; stolen creds</pre></article>
            <article class="term-card"><div class="term-top"><span class="term-icon ti-ransom">RAN</span><span class="term-name">ransomware</span></div><p class="term-def">Malware that encrypts data and demands payment for a decryption key.</p><pre class="term-visual">files -&gt; encrypted -&gt; ransom note</pre></article>
            <article class="term-card"><div class="term-top"><span class="term-icon ti-spyware">SPY</span><span class="term-name">spyware</span></div><p class="term-def">Software that silently monitors activity and exfiltrates data.</p><pre class="term-visual">collect -&gt; beacon -&gt; exfiltrate</pre></article>
            <article class="term-card"><div class="term-top"><span class="term-icon ti-zeroday">0D</span><span class="term-name">zero-day</span></div><p class="term-def">A vulnerability exploited before defenders have an official fix.</p><pre class="term-visual">new vuln -&gt; no patch -&gt; active exploit</pre></article>
            <article class="term-card"><div class="term-top"><span class="term-icon ti-botnet">BOT</span><span class="term-name">botnet</span></div><p class="term-def">A network of compromised machines remotely controlled for abuse.</p><pre class="term-visual">infected nodes -&gt; c2 -&gt; synchronized action</pre></article>
          </div>
        </div>
      </div></div>
    </section>

    <div class="ascii-div" aria-hidden="true">&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;</div>

    <!-- ====== MODULE: ZINES ====== -->
    <section class="ts-module reveal" id="mod-zines" aria-label="Popular zines">
      <button class="ts-module-header" aria-expanded="false" aria-controls="mod-zines-body">
        <h2 class="section-head"><span>//</span> zines_2025_2026</h2>
        <p class="ts-module-summary">9 coding and cybersecurity newsletters for 2025&ndash;2026.</p>
        <span class="ts-module-chevron" aria-hidden="true">&#9660;</span>
      </button>
      <div class="ts-module-body" id="mod-zines-body"><div>
        <div class="container zines-section" id="zines">
          <p class="history-intro">Nine widely followed coding, tech, and cybersecurity newsletter picks.</p>
          <div class="zine-grid">
            <article class="zine-card"><div class="zine-head"><span class="zine-rank">#01</span><span class="zine-cat">coding+tech</span></div><h3 class="zine-name"><a href="https://tldr.tech/" target="_blank" rel="noopener noreferrer">TLDR</a></h3><p class="zine-desc">High-signal daily digest for engineering, startups, tools, and product launches.</p></article>
            <article class="zine-card"><div class="zine-head"><span class="zine-rank">#02</span><span class="zine-cat">coding</span></div><h3 class="zine-name"><a href="https://javascriptweekly.com/" target="_blank" rel="noopener noreferrer">JavaScript Weekly</a></h3><p class="zine-desc">Weekly curation of JavaScript ecosystem news, releases, and architecture writeups.</p></article>
            <article class="zine-card"><div class="zine-head"><span class="zine-rank">#03</span><span class="zine-cat">coding</span></div><h3 class="zine-name"><a href="https://www.pythonweekly.com/" target="_blank" rel="noopener noreferrer">Python Weekly</a></h3><p class="zine-desc">Python tutorials, tooling updates, and production engineering references.</p></article>
            <article class="zine-card"><div class="zine-head"><span class="zine-rank">#04</span><span class="zine-cat">tech culture</span></div><h3 class="zine-name"><a href="https://www.hackernewsletter.com/" target="_blank" rel="noopener noreferrer">Hacker Newsletter</a></h3><p class="zine-desc">Handpicked high-quality links from the Hacker News ecosystem each week.</p></article>
            <article class="zine-card"><div class="zine-head"><span class="zine-rank">#05</span><span class="zine-cat">engineering</span></div><h3 class="zine-name"><a href="https://newsletter.pragmaticengineer.com/" target="_blank" rel="noopener noreferrer">The Pragmatic Engineer</a></h3><p class="zine-desc">Deep dives on software engineering strategy, systems, and tech-company execution.</p></article>
            <article class="zine-card"><div class="zine-head"><span class="zine-rank">#06</span><span class="zine-cat">cybersecurity</span></div><h3 class="zine-name"><a href="https://www.sans.org/newsletters/newsbites/" target="_blank" rel="noopener noreferrer">SANS NewsBites</a></h3><p class="zine-desc">Curated security news with context for defenders, responders, and policy teams.</p></article>
            <article class="zine-card"><div class="zine-head"><span class="zine-rank">#07</span><span class="zine-cat">cybersecurity</span></div><h3 class="zine-name"><a href="https://thehackernews.com/" target="_blank" rel="noopener noreferrer">The Hacker News</a></h3><p class="zine-desc">High-velocity cyber threat coverage and vulnerability disclosure updates.</p></article>
            <article class="zine-card"><div class="zine-head"><span class="zine-rank">#08</span><span class="zine-cat">cybersecurity</span></div><h3 class="zine-name"><a href="https://www.darkreading.com/" target="_blank" rel="noopener noreferrer">Dark Reading</a></h3><p class="zine-desc">Enterprise security reporting with threat intelligence and operations focus.</p></article>
            <article class="zine-card"><div class="zine-head"><span class="zine-rank">#09</span><span class="zine-cat">security analysis</span></div><h3 class="zine-name"><a href="https://krebsonsecurity.com/" target="_blank" rel="noopener noreferrer">Krebs on Security</a></h3><p class="zine-desc">Investigative security journalism on breaches, fraud infrastructure, and abuse markets.</p></article>
          </div>
          <div class="puzzle-unlock-area" id="puzzleD" data-puzzle="portscan" style="margin-top:2rem">
            <div class="puzzle-solved-badge">&#10003; PORT MAP VERIFIED</div>
            <div class="puzzle-game">
              <div class="puzzle-title">&#128274; Port Scan Challenge</div>
              <div class="puzzle-desc">Toggle the ports to match the secure target map. <button class="cb-mini-btn secondary" style="font-size:0.6rem;padding:0.2rem 0.5rem" onclick="TS.puzzleSkip('portscan')">Skip</button></div>
              <div class="port-target" id="portTarget">Target: ---</div>
              <div class="port-scan-row" id="portScanRow"></div>
              <button class="cb-mini-btn" style="margin-top:0.5rem" onclick="TS.checkPortScan()">Verify</button>
              <div class="checksum-status" id="portScanStatus">set the correct open ports</div>
            </div>
            <div class="puzzle-content">
              <p style="font-family:var(--mono);font-size:0.78rem;color:var(--green);line-height:1.6">&#127919; <strong>Recon Bonus:</strong> Port context matters. Keep remote exposure minimal, validate open services, and treat every listening endpoint as a potential narrative leak.</p>
            </div>
          </div>
        </div>
      </div></div>
    </section>

    <div class="ascii-div" aria-hidden="true">&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;&#9552;</div>

    <!-- ====== CLOSING QUOTE ====== -->
    <section class="quote-section reveal" aria-label="Quote">
      <div class="container">
        <blockquote class="quote-block glass">
          <p class="quote-text">"Turn up the radio. And turn out the lights."</p>
          <cite class="quote-cite">&mdash; Mr. Robot</cite>
        </blockquote>
      </div>
    </section>

    <div id="cbBottomSentinel" class="cb-bottom-sentinel" aria-hidden="true"></div>

  </main>

  <footer role="contentinfo">
    <p class="foot-main">Code Cookbook by <a href="https://github.com/thumpersecure" target="_blank" rel="noopener noreferrer">THUMPERSECURE</a> &mdash; a living blend of OSINT workflows, privacy tooling, and hacker-culture archives.</p>
    <p class="foot-sub">Built from <a href="data/site_snapshot.json">snapshot data</a> and curated references. Explore <a href="#ingredients">ingredients</a>, <a href="#quotes">quotes</a>, <a href="#glossary">glossary</a>, and <a href="#zines">zines</a>.</p>
  </footer>

</div>

<!-- ====================================================================
     JAVASCRIPT — All inline, organized by feature
     ==================================================================== -->
<script>
(function(){
"use strict";

/* ====== GLOBAL NAMESPACE ====== */
window.TS = window.TS || {};
var SETTINGS_KEY = 'ts_cookbook_settings';
var SNAPSHOT_CACHE_KEY = 'ts_cookbook_snapshot';

function getSettings(){try{return JSON.parse(localStorage.getItem(SETTINGS_KEY))||{}}catch(e){return{}}}
function saveSettings(s){try{localStorage.setItem(SETTINGS_KEY,JSON.stringify(s))}catch(e){}}
function getSetting(k,def){var s=getSettings();return s[k]!==undefined?s[k]:def}
function setSetting(k,v){var s=getSettings();s[k]=v;saveSettings(s)}

function sleep(ms){return new Promise(function(r){setTimeout(r,ms)})}
var reducedMotion=window.matchMedia&&window.matchMedia('(prefers-reduced-motion: reduce)').matches;

/* ====== BOOT SEQUENCE ====== */
(async function(){
  var b=document.getElementById('bootScreen'),l=document.getElementById('bootLog');
  if(!b)return;
  if(sessionStorage.getItem('cb_boot')){b.remove();return}
  if(reducedMotion){sessionStorage.setItem('cb_boot','1');b.remove();return}
  sessionStorage.setItem('cb_boot','1');
  var lines=[
    {t:'[SYS] CODE COOKBOOK v3.0',c:null},
    {t:'[SYS] THUMPERSECURE SYSTEMS',c:null},
    {t:'─────────────────────────────',c:'#44475a'},
    {t:'[INIT] Loading kernel modules...',c:null},
    {t:'[OK]   Particle renderer',c:'#00ffcc'},
    {t:'[OK]   Code rain shader',c:'#00ffcc'},
    {t:'[OK]   Glitch engine',c:'#00ffcc'},
    {t:'[OK]   CRT overlay',c:'#00ffcc'},
    {t:'[OK]   Wireframe renderer (Gibson)',c:'#00ffcc'},
    {t:'[OK]   Snapshot data layer',c:'#18dcff'},
    {t:'[OK]   Music controller',c:'#18dcff'},
    {t:'[OK]   Effects engine',c:'#18dcff'},
    {t:'[OK]   Puzzle system',c:'#18dcff'},
    {t:'[OK]   Grid: online',c:'#18dcff'},
    {t:'─────────────────────────────',c:'#44475a'},
    {t:'OSINT & SEO SPECIALIST',c:'#ff00aa'},
    {t:'',c:null},
    {t:'Ready.',c:'#00ffcc'}
  ];
  for(var i=0;i<lines.length;i++){
    var d=document.createElement('div');
    d.textContent=lines[i].t;
    if(lines[i].c)d.style.color=lines[i].c;
    if(lines[i].t==='OSINT & SEO SPECIALIST')d.style.fontWeight='700';
    l.appendChild(d);l.scrollTop=l.scrollHeight;
    await sleep(lines[i].t?55+Math.random()*35:120);
  }
  await sleep(400);
  b.style.opacity='0';b.style.transition='opacity 0.5s ease';
  await sleep(500);b.remove();
})();

/* ====== DATA LOADER (Phase 2) ====== */
var siteData=null;
var dataSource='loading';

function getEmbeddedFallback(){
  try{var el=document.getElementById('fallback-snapshot');return JSON.parse(el.textContent)}catch(e){return null}
}

async function loadSiteData(){
  var devMode=getSetting('dev_mode',false);
  // Tier 1: Fetch live snapshot
  if(!devMode){
    try{
      var ctrl=new AbortController();
      var tid=setTimeout(function(){ctrl.abort()},5000);
      var base=location.pathname.replace(/\/[^\/]*$/,'/');
      var r=await fetch(base+'data/site_snapshot.json',{signal:ctrl.signal});
      clearTimeout(tid);
      if(r.ok){
        var d=await r.json();
        if(d&&d.repos&&d.repos.length>0){
          siteData=d;dataSource='live';
          try{localStorage.setItem(SNAPSHOT_CACHE_KEY,JSON.stringify({ts:Date.now(),data:d}))}catch(e){}
          return d;
        }
      }
    }catch(e){/* fetch failed, try cache */}
  }
  // Tier 2: localStorage cache
  try{
    var cached=JSON.parse(localStorage.getItem(SNAPSHOT_CACHE_KEY));
    if(cached&&cached.data&&cached.data.repos&&cached.data.repos.length>0){
      var age=Date.now()-cached.ts;
      if(age<7*24*60*60*1000){
        siteData=cached.data;dataSource='cached';return cached.data;
      }
    }
  }catch(e){}
  // Tier 3: Embedded fallback
  var fb=getEmbeddedFallback();
  if(fb){siteData=fb;dataSource='embedded';return fb}
  // Should never reach here
  siteData={stats:{tools_count:13,stars_total:541,featured_count:4,followers:43},repos:[]};
  dataSource='error';
  return siteData;
}

function esc(s){if(!s)return'';return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;')}
function safeUrl(u){try{var h=new URL(u);return(h.protocol==='https:'||h.protocol==='http:')&&(h.hostname==='github.com'||h.hostname.endsWith('.github.com')||h.hostname.endsWith('.github.io'))?u:'#'}catch(e){return'#'}}
function relDate(iso){var d=Math.floor((Date.now()-new Date(iso).getTime())/864e5);if(d<1)return'today';if(d<30)return d+'d ago';if(d<365)return Math.floor(d/30)+'mo ago';return Math.floor(d/365)+'y ago'}

/* ====== RENDER FUNCTIONS ====== */
function animateCounter(el,target){
  var c=0,s=Math.max(1,Math.floor(target/50));
  var iv=setInterval(function(){c+=s;if(c>=target){c=target;clearInterval(iv)}el.textContent=c},30);
}

function renderStats(data){
  var st=data.stats||{};
  var pairs=[['statProjects',st.tools_count],['statStars',st.stars_total],['statFeatured',st.featured_count],['statFollowers',st.followers]];
  pairs.forEach(function(p){
    var el=document.getElementById(p[0]);
    if(el&&p[1]){animateCounter(el,p[1])}
  });
  // Update NFO block
  var nfoT=document.getElementById('nfoTools');if(nfoT)nfoT.textContent=st.tools_count||13;
  var nfoS=document.getElementById('nfoStars');if(nfoS)nfoS.textContent=(st.stars_total||541)+'+';
  // Data status
  var ds=document.getElementById('dataStatus');
  if(ds){
    if(dataSource==='live'){
      var dt=data.last_updated_utc?new Date(data.last_updated_utc).toISOString().replace('T',' ').slice(0,16)+' UTC':'';
      ds.textContent='Snapshot: '+dt;ds.classList.remove('fallback');
    }else if(dataSource==='cached'){
      ds.textContent='Cached snapshot in use';ds.classList.add('fallback');
    }else if(dataSource==='embedded'){
      ds.textContent='Offline snapshot in use';ds.classList.add('fallback');
    }else{
      ds.textContent='Fallback data';ds.classList.add('fallback');
    }
  }
}

function buildFeaturedCards(data){
  var grid=document.getElementById('featuredGrid');if(!grid)return;
  var featured=data.repos.filter(function(r){return r.featured});
  if(!featured.length){grid.innerHTML='<div class="loading-msg">No featured recipes.</div>';return}
  grid.innerHTML='';
  featured.forEach(function(r){
    var card=document.createElement('article');card.className='recipe-card reveal visible';
    card.setAttribute('itemscope','');card.setAttribute('itemtype','https://schema.org/SoftwareApplication');
    card.innerHTML='<div class="recipe-header"><div class="recipe-label">recipe</div><h3 class="recipe-name" itemprop="name"><a href="'+safeUrl(r.html_url)+'" target="_blank" rel="noopener noreferrer">'+esc(r.name)+'</a></h3></div><div class="recipe-body"><div class="recipe-item"><div class="recipe-item-label">method</div><div class="recipe-item-value" itemprop="description">'+esc(r.description)+'</div></div></div><div class="recipe-meta">'+(r.stars>0?'<span class="pill pill-stars">&#9733; '+r.stars+'</span>':'')+(r.language?'<span class="pill pill-lang">'+esc(r.language)+'</span>':'')+'</div>';
    grid.appendChild(card);
  });
}

function buildProjectCard(repo,idx){
  var c=document.createElement('article');c.className='project-card';c.style.transitionDelay=(idx*0.04)+'s';
  c.setAttribute('data-name',(repo.name||'').toLowerCase());
  c.setAttribute('data-desc',(repo.description||'').toLowerCase());
  c.setAttribute('data-lang',(repo.language||'').toLowerCase());
  c.setAttribute('data-topics',(repo.topics||[]).join(' ').toLowerCase());
  var sN=esc(repo.name),sD=esc(repo.description||'OSINT & SEO tool by THUMPERSECURE'),sL=esc(repo.language),sU=safeUrl(repo.html_url);
  c.innerHTML='<a class="project-link" href="'+sU+'" target="_blank" rel="noopener noreferrer"><div class="card-bar"><span class="dot dot-r"></span><span class="dot dot-y"></span><span class="dot dot-g"></span><span class="card-filename">'+sN+'.ts</span></div><div class="card-body"><h3 class="card-name">'+sN+'</h3><p class="card-desc">'+sD+'</p></div><div class="card-meta">'+(repo.stars>0?'<span class="pill pill-stars">&#9733; '+repo.stars+'</span>':'')+(sL?'<span class="pill pill-lang">'+sL+'</span>':'')+'<span class="pill pill-date">'+relDate(repo.last_updated)+'</span></div></a>';
  return c;
}

var allProjectCards=[];
function renderProjectGrid(data){
  var grid=document.getElementById('projectGrid');if(!grid)return;
  grid.innerHTML='';
  if(!data.repos||!data.repos.length){grid.innerHTML='<div class="loading-msg">No repositories found.</div>';return}
  var cO=new IntersectionObserver(function(e){e.forEach(function(en){if(en.isIntersecting){en.target.classList.add('visible');cO.unobserve(en.target)}})},{threshold:0.06});
  allProjectCards=[];
  data.repos.forEach(function(r,i){var c=buildProjectCard(r,i);allProjectCards.push(c);grid.appendChild(c);cO.observe(c)});
}

// Search/filter
var searchInput=document.getElementById('repoSearch');
if(searchInput){
  searchInput.addEventListener('input',function(){
    var q=this.value.trim().toLowerCase();
    allProjectCards.forEach(function(c){
      if(!q){c.style.display='';return}
      var match=c.getAttribute('data-name').indexOf(q)!==-1||c.getAttribute('data-desc').indexOf(q)!==-1||c.getAttribute('data-lang').indexOf(q)!==-1||c.getAttribute('data-topics').indexOf(q)!==-1;
      c.style.display=match?'':'none';
    });
  });
}

// Initialize data on load
(async function(){
  var data=await loadSiteData();
  renderStats(data);
  buildFeaturedCards(data);
  renderProjectGrid(data);
})();

/* ====== COLLAPSIBLE MODULES (Phase 4) ====== */
var modules=[].slice.call(document.querySelectorAll('.ts-module'));
modules.forEach(function(mod){
  var header=mod.querySelector('.ts-module-header');
  var body=mod.querySelector('.ts-module-body');
  if(!header||!body)return;
  header.addEventListener('click',function(){toggleModule(mod)});
  header.addEventListener('keydown',function(e){
    if(e.key==='Enter'||e.key===' '){e.preventDefault();toggleModule(mod)}
  });
});

function toggleModule(mod,forceOpen){
  var header=mod.querySelector('.ts-module-header');
  var body=mod.querySelector('.ts-module-body');
  if(!header||!body)return;
  var isOpen=header.getAttribute('aria-expanded')==='true';
  if(forceOpen!==undefined){if(forceOpen===isOpen)return;isOpen=!forceOpen}
  if(isOpen){
    body.style.maxHeight='0';body.classList.remove('open');
    header.setAttribute('aria-expanded','false');
  }else{
    body.style.maxHeight=body.scrollHeight+2000+'px';body.classList.add('open');
    header.setAttribute('aria-expanded','true');
  }
}

var expandAllBtn=document.getElementById('expandAllBtn');
var collapseAllBtn=document.getElementById('collapseAllBtn');
var moduleCtrlStatus=document.getElementById('moduleCtrlStatus');
function pulseModuleCtrl(btn){
  if(!btn||reducedMotion)return;
  btn.classList.remove('tron-pulse');
  requestAnimationFrame(function(){
    btn.classList.add('tron-pulse');
    setTimeout(function(){btn.classList.remove('tron-pulse')},460);
  });
}
function setModuleCtrlStatus(msg){
  if(moduleCtrlStatus)moduleCtrlStatus.textContent=msg;
}
function toggleAllModules(forceOpen){
  var step=reducedMotion?0:70;
  modules.forEach(function(m,i){
    if(step===0){toggleModule(m,forceOpen);return}
    setTimeout(function(){toggleModule(m,forceOpen)},i*step);
  });
}
if(expandAllBtn)expandAllBtn.addEventListener('click',function(){
  pulseModuleCtrl(expandAllBtn);
  toggleAllModules(true);
  setModuleCtrlStatus('All modules expanded');
});
if(collapseAllBtn)collapseAllBtn.addEventListener('click',function(){
  pulseModuleCtrl(collapseAllBtn);
  toggleAllModules(false);
  setModuleCtrlStatus('All modules collapsed');
});

/* ====== MUSIC CONTROLLER (Phase 5) ====== */
var TRACK_CONFIG=[
  {local:'Tron-Website-Music-Spoken-Words.m4a',query:'TRON 1982 End Titles Wendy Carlos',label:'Tron — Spoken Words'},
  {local:null,query:'Mr Robot soundtrack Mac Quayle 3.0_5-da3m0nsneverstop',label:'Mr Robot — Daemons'},
  {local:null,query:'Swordfish soundtrack Paul Oakenfold',label:'Swordfish — Breach'}
];
var mPlayer=document.getElementById('musicPlayer');
var mBtns=[].slice.call(document.querySelectorAll('.music-btn'));
var mStatus=document.getElementById('musicStatus');
var mFallback=document.getElementById('musicFallback');
var mMuteBtn=document.getElementById('musicMute');
var mNextBtn=document.getElementById('musicNext');
var autoplayBanner=document.getElementById('autoplayBanner');
var mCurrentIndex=-1;
var mIsMuted=getSetting('music_muted',false);
var mCache={};
var mAutoplayPending=false;

function setMusicStatus(txt,state){
  if(!mStatus)return;
  mStatus.textContent=txt;
  mStatus.classList.remove('playing','error');
  if(state)mStatus.classList.add(state);
}

function setActiveBtn(idx){
  mBtns.forEach(function(b,i){var on=i===idx;b.classList.toggle('active',on);b.setAttribute('aria-pressed',on?'true':'false')});
}

function updateMuteUI(){
  if(!mMuteBtn)return;
  mMuteBtn.textContent=mIsMuted?'\uD83D\uDD07':'\uD83D\uDD0A';
  mMuteBtn.classList.toggle('muted',mIsMuted);
  mMuteBtn.setAttribute('aria-label',mIsMuted?'Unmute audio':'Mute audio');
  if(mPlayer)mPlayer.volume=mIsMuted?0:1;
}

function hideFallback(){if(mFallback)mFallback.hidden=true}
function showFallback(query){
  if(!mFallback)return;
  mFallback.href='https://www.youtube.com/results?search_query='+encodeURIComponent(query);
  mFallback.hidden=false;
}

async function loadPreview(query){
  if(mCache[query]!==undefined)return mCache[query];
  try{
    var r=await fetch('https://itunes.apple.com/search?term='+encodeURIComponent(query)+'&entity=song&limit=8');
    if(!r.ok)throw new Error('itunes '+r.status);
    var data=await r.json();
    var hit=(data.results||[]).find(function(x){return !!x.previewUrl})||null;
    mCache[query]=hit;return hit;
  }catch(e){mCache[query]=null;return null}
}

async function resolveTrackUrl(idx){
  var cfg=TRACK_CONFIG[idx];
  // Try local file first
  if(cfg.local){
    try{
      var base=location.pathname.replace(/\/[^\/]*$/,'/');
      var r=await fetch(base+cfg.local,{method:'HEAD'});
      if(r.ok)return base+cfg.local;
    }catch(e){}
  }
  // Fall back to iTunes preview
  var hit=await loadPreview(cfg.query);
  if(hit&&hit.previewUrl)return hit.previewUrl;
  return null;
}

async function playTrack(idx){
  if(!mPlayer)return;
  var cfg=TRACK_CONFIG[idx];
  hideFallback();
  mCurrentIndex=idx;
  setSetting('music_track_index',idx);
  setActiveBtn(idx);
  setMusicStatus('loading: '+cfg.label.toLowerCase()+' ...', null);
  var url=await resolveTrackUrl(idx);
  if(!url){
    setMusicStatus('preview unavailable','error');
    showFallback(cfg.query);return;
  }
  if(mPlayer.src!==url){mPlayer.src=url;mPlayer.load()}
  mPlayer.volume=mIsMuted?0:1;
  try{
    await mPlayer.play();
    setMusicStatus('playing: '+cfg.label.toLowerCase(),'playing');
    hideAutoplayBanner();
  }catch(e){
    setMusicStatus('tap to play: '+cfg.label.toLowerCase(),null);
    showAutoplayBanner();
    mAutoplayPending=true;
  }
}

function showAutoplayBanner(){if(autoplayBanner)autoplayBanner.classList.add('show')}
function hideAutoplayBanner(){if(autoplayBanner)autoplayBanner.classList.remove('show')}

function nextTrack(){
  var next=(mCurrentIndex+1)%TRACK_CONFIG.length;
  playTrack(next);
}

// Mute toggle
if(mMuteBtn){
  updateMuteUI();
  mMuteBtn.addEventListener('click',function(){
    mIsMuted=!mIsMuted;setSetting('music_muted',mIsMuted);updateMuteUI();
  });
}

// Track buttons
mBtns.forEach(function(btn,i){
  btn.addEventListener('click',function(){
    if(mCurrentIndex===i&&mPlayer&&!mPlayer.paused){
      mPlayer.pause();setMusicStatus('paused: '+TRACK_CONFIG[i].label.toLowerCase(),null);return;
    }
    if(mCurrentIndex===i&&mPlayer&&mPlayer.paused&&mPlayer.src){
      mPlayer.play().then(function(){setMusicStatus('playing: '+TRACK_CONFIG[i].label.toLowerCase(),'playing')}).catch(function(){});return;
    }
    playTrack(i);
  });
});

// Next button
if(mNextBtn)mNextBtn.addEventListener('click',nextTrack);

// Playlist auto-advance
if(mPlayer){
  mPlayer.addEventListener('ended',function(){nextTrack()});
  mPlayer.addEventListener('error',function(){setMusicStatus('audio source failed','error')});
}

// Autoplay banner click
if(autoplayBanner){
  autoplayBanner.addEventListener('click',function(){
    if(mPlayer&&mPlayer.src){
      mPlayer.play().then(function(){
        setMusicStatus('playing: '+TRACK_CONFIG[mCurrentIndex].label.toLowerCase(),'playing');
        hideAutoplayBanner();mAutoplayPending=false;
      }).catch(function(){});
    }
  });
}

// Resume from stored preferences + attempt autoplay
(function(){
  var storedIdx=getSetting('music_track_index',0);
  if(typeof storedIdx==='number'&&storedIdx>=0&&storedIdx<TRACK_CONFIG.length){
    playTrack(storedIdx);
  }else{
    playTrack(0);
  }
})();

// Global gesture handler for autoplay
document.addEventListener('click',function onFirstGesture(){
  if(mAutoplayPending&&mPlayer&&mPlayer.src){
    mPlayer.play().then(function(){
      setMusicStatus('playing: '+TRACK_CONFIG[mCurrentIndex].label.toLowerCase(),'playing');
      hideAutoplayBanner();mAutoplayPending=false;
    }).catch(function(){});
  }
  document.removeEventListener('click',onFirstGesture);
},{once:false});

/* ====== AI DEFENSE EFFECTS (Phase 6) ====== */
var FX_EVENTS=[
  {icon:'&#128302;',label:'SIMULATION',msg:'Bot-3 traced anomaly in sector 7\u2026 quarantined.'},
  {icon:'&#128274;',label:'DEMO',msg:'Firewall puzzle gate: passcode accepted.'},
  {icon:'&#127912;',label:'SIMULATION',msg:'Packet mirage deployed \u2014 3 decoys active.'},
  {icon:'&#128196;',label:'DEMO',msg:'Recipe index decrypted \u2014 13 entries verified.'},
  {icon:'&#128737;',label:'SIMULATION',msg:'Intrusion probe deflected by AI layer.'},
  {icon:'&#128225;',label:'DEMO',msg:'Telemetry pulse: all signals nominal.'},
  {icon:'&#128272;',label:'SIMULATION',msg:'Encrypted handshake completed \u2014 channel secure.'},
  {icon:'&#129302;',label:'DEMO',msg:'Bot swarm neutralized \u2014 0 breaches detected.'}
];
var FX_SCROLL_EVENTS=[
  {key:'cinema',selector:'#mod-cinema',icon:'&#127910;',label:'DEMO',msg:'Cinema grid entered \u2014 wireframe channels are live.'},
  {key:'archives',selector:'#mod-archives',icon:'&#128190;',label:'SIMULATION',msg:'Archive lane opened \u2014 BBS artifacts loaded.'},
  {key:'recipes',selector:'#mod-recipes',icon:'&#127860;',label:'DEMO',msg:'Featured recipes unlocked \u2014 signal quality high.'},
  {key:'index',selector:'#recipe-index-section',icon:'&#128218;',label:'SIMULATION',msg:'Recipe index sweep complete \u2014 pattern map updated.'},
  {key:'ingredients',selector:'#mod-ingredients',icon:'&#128197;',label:'DEMO',msg:'Timeline grid synced \u2014 legacy-to-modern bridge stable.'},
  {key:'quotes',selector:'#mod-quotes',icon:'&#128172;',label:'SIMULATION',msg:'Legend quote wall energized \u2014 rotating hot feed active.'},
  {key:'glossary',selector:'#mod-glossary',icon:'&#128295;',label:'DEMO',msg:'Threat glossary parsed \u2014 defensive vocabulary armed.'},
  {key:'zines',selector:'#mod-zines',icon:'&#128240;',label:'SIMULATION',msg:'Deep-scroll achieved \u2014 zine relay now broadcasting.'}
];
var fxContainer=document.getElementById('fxToastContainer');
var fxEnabled=getSetting('effects_enabled',reducedMotion?false:true);
var fxTimer=null;
var fxVisibleCount=0;
var fxScrollObserver=null;
var fxScrollMap={};
var fxScrollSeen={};

function fxShowToast(evt){
  if(!fxContainer||fxVisibleCount>=2)return;
  var toast=document.createElement('div');toast.className='fx-toast';
  toast.setAttribute('role','status');
  toast.innerHTML='<span class="fx-toast-icon">'+evt.icon+'</span><div class="fx-toast-body"><div class="fx-toast-label">'+esc(evt.label)+'</div><div class="fx-toast-msg">'+esc(evt.msg)+'</div></div><button class="fx-toast-close" aria-label="Dismiss">&times;</button>';
  fxContainer.appendChild(toast);fxVisibleCount++;
  requestAnimationFrame(function(){toast.classList.add('show')});
  var closeBtn=toast.querySelector('.fx-toast-close');
  function remove(){
    toast.classList.remove('show');
    setTimeout(function(){if(toast.parentNode)toast.parentNode.removeChild(toast);fxVisibleCount=Math.max(0,fxVisibleCount-1)},350);
  }
  if(closeBtn)closeBtn.addEventListener('click',remove);
  setTimeout(remove,6000+Math.random()*2000);
}

function fxScheduleNext(){
  if(!fxEnabled)return;
  var delay=15000+Math.random()*30000;
  fxTimer=setTimeout(function(){
    var evt=FX_EVENTS[Math.floor(Math.random()*FX_EVENTS.length)];
    fxShowToast(evt);
    fxScheduleNext();
  },delay);
}

function fxStart(){fxEnabled=true;setSetting('effects_enabled',true);fxScheduleNext();updateEffectsUI()}
function fxStop(){fxEnabled=false;setSetting('effects_enabled',false);if(fxTimer)clearTimeout(fxTimer);fxTimer=null;updateEffectsUI()}

function updateEffectsUI(){
  var btn=document.getElementById('toggleEffects');
  if(btn){btn.textContent='Effects: '+(fxEnabled?'On':'Off');btn.classList.toggle('on',fxEnabled)}
  var stBtn=document.getElementById('settingEffects');
  if(stBtn){stBtn.classList.toggle('on',fxEnabled);stBtn.setAttribute('aria-checked',fxEnabled?'true':'false')}
}

function fxShowScrollToast(key){
  var evt=fxScrollMap[key];
  if(!evt||!fxEnabled)return;
  fxShowToast(evt);
}

function fxInitScrollToasts(){
  if(!('IntersectionObserver' in window)||fxScrollObserver)return;
  fxScrollObserver=new IntersectionObserver(function(entries){
    entries.forEach(function(en){
      if(!en.isIntersecting||!fxEnabled)return;
      var key=en.target.getAttribute('data-fx-scroll-key');
      if(!key||fxScrollSeen[key])return;
      fxScrollSeen[key]=true;
      fxShowScrollToast(key);
      fxScrollObserver.unobserve(en.target);
    });
  },{threshold:0.22,rootMargin:'0px 0px -20% 0px'});
  FX_SCROLL_EVENTS.forEach(function(evt){
    var el=document.querySelector(evt.selector);
    if(!el)return;
    fxScrollMap[evt.key]=evt;
    el.setAttribute('data-fx-scroll-key',evt.key);
    fxScrollObserver.observe(el);
  });
}

var toggleEffectsBtn=document.getElementById('toggleEffects');
if(toggleEffectsBtn){
  toggleEffectsBtn.addEventListener('click',function(){if(fxEnabled)fxStop();else fxStart()});
}

if(fxEnabled)fxScheduleNext();
updateEffectsUI();
fxInitScrollToasts();

/* ====== PUZZLES (Phase 7) ====== */
function getPuzzleState(id){return getSetting('puzzle_'+id,false)}
function setPuzzleState(id,solved){setSetting('puzzle_'+id,solved);updatePuzzleUI(id)}
function updatePuzzleUI(id){
  var area=document.querySelector('[data-puzzle="'+id+'"]');
  if(!area)return;
  if(getPuzzleState(id)){area.classList.add('solved')}else{area.classList.remove('solved')}
}

// Puzzle A: Terminal Checksum
(function(){
  var grid=document.getElementById('checksumGrid');
  var status=document.getElementById('checksumStatus');
  if(!grid)return;
  var chars='ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
  var cells=[];var hintIndices=[];var selected=[];var code='';
  // Generate grid
  for(var i=0;i<36;i++){
    var ch=chars[Math.floor(Math.random()*chars.length)];
    var btn=document.createElement('button');btn.type='button';btn.className='checksum-cell';
    btn.textContent=ch;btn.setAttribute('data-idx',i);btn.setAttribute('tabindex','0');
    btn.setAttribute('aria-label','Character '+ch);
    cells.push({el:btn,ch:ch});grid.appendChild(btn);
  }
  // Pick 3 hint cells
  var pool=[];for(var j=0;j<36;j++)pool.push(j);
  for(var k=0;k<3;k++){var ri=Math.floor(Math.random()*pool.length);hintIndices.push(pool[ri]);code+=cells[pool[ri]].ch;pool.splice(ri,1)}
  hintIndices.forEach(function(hi){cells[hi].el.classList.add('hint')});
  // Click handler
  grid.addEventListener('click',function(e){
    var btn=e.target.closest('.checksum-cell');if(!btn)return;
    var idx=parseInt(btn.getAttribute('data-idx'));
    if(btn.classList.contains('selected'))return;
    var expected=hintIndices[selected.length];
    if(idx===expected){
      btn.classList.add('selected');selected.push(idx);
      if(status)status.textContent='selected: '+selected.length+'/3';
      if(selected.length===3){
        if(status)status.textContent='checksum verified: '+code;
        setPuzzleState('checksum',true);
      }
    }else{
      btn.classList.add('wrong');
      if(status)status.textContent='wrong character — try the glowing ones';
      setTimeout(function(){btn.classList.remove('wrong')},600);
    }
  });
  updatePuzzleUI('checksum');
})();

// Puzzle B: Pattern Match
(function(){
  var container=document.getElementById('patternOptions');
  if(!container)return;
  var options=[
    {name:'palm-tree',correct:true},
    {name:'Telespot',correct:false},
    {name:'Spin',correct:false},
    {name:'TeleSTOP',correct:false}
  ];
  // Shuffle
  for(var i=options.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var t=options[i];options[i]=options[j];options[j]=t}
  options.forEach(function(opt){
    var btn=document.createElement('button');btn.type='button';btn.className='pattern-opt';
    btn.textContent=opt.name;btn.setAttribute('tabindex','0');
    btn.addEventListener('click',function(){
      if(opt.correct){
        btn.classList.add('correct');
        setPuzzleState('pattern',true);
      }else{
        btn.classList.add('wrong');
        setTimeout(function(){btn.classList.remove('wrong')},600);
      }
    });
    container.appendChild(btn);
  });
  updatePuzzleUI('pattern');
})();

// Puzzle C: Decrypt Slider
(function(){
  var target=document.getElementById('dialTarget');
  var statusEl=document.getElementById('decryptStatus');
  if(!target)return;
  // Generate random target hex prefix
  var a=Math.floor(Math.random()*256),b=Math.floor(Math.random()*256),c=Math.floor(Math.random()*256);
  var hex=function(n){return n.toString(16).padStart(2,'0').toUpperCase()};
  var targetStr=hex(a)+hex(b)+hex(c);
  target.textContent='Target: '+targetStr;
  TS.decryptTarget={a:a,b:b,c:c,str:targetStr};
  updatePuzzleUI('decrypt');
})();

// Puzzle D: Port Scan
(function(){
  var container=document.getElementById('portScanRow');
  var targetEl=document.getElementById('portTarget');
  var statusEl=document.getElementById('portScanStatus');
  if(!container||!targetEl)return;
  var ports=[22,80,443,8080,3000];
  var shuffled=ports.slice();
  for(var i=shuffled.length-1;i>0;i--){
    var j=Math.floor(Math.random()*(i+1));
    var t=shuffled[i];shuffled[i]=shuffled[j];shuffled[j]=t;
  }
  var targetOpen=shuffled.slice(0,3).sort(function(a,b){return a-b});
  targetEl.textContent='Target: open '+targetOpen.join(', ');
  TS.portScanTarget=targetOpen.slice();
  ports.forEach(function(port){
    var btn=document.createElement('button');
    btn.type='button';btn.className='port-btn';
    btn.textContent=String(port);
    btn.setAttribute('data-port',String(port));
    btn.setAttribute('aria-label','Toggle port '+String(port));
    btn.addEventListener('click',function(){
      btn.classList.toggle('open');
      if(statusEl)statusEl.textContent='open ports selected: '+document.querySelectorAll('#portScanRow .port-btn.open').length;
    });
    container.appendChild(btn);
  });
  updatePuzzleUI('portscan');
})();

TS.checkDecrypt=function(){
  var dA=document.getElementById('dialA'),dB=document.getElementById('dialB'),dC=document.getElementById('dialC');
  var statusEl=document.getElementById('decryptStatus');
  if(!dA||!dB||!dC||!TS.decryptTarget)return;
  var va=parseInt(dA.value,16),vb=parseInt(dB.value,16),vc=parseInt(dC.value,16);
  if(isNaN(va)||isNaN(vb)||isNaN(vc)){if(statusEl)statusEl.textContent='enter valid hex values (00-FF)';return}
  if(va===TS.decryptTarget.a&&vb===TS.decryptTarget.b&&vc===TS.decryptTarget.c){
    if(statusEl)statusEl.textContent='decrypted! access granted.';
    setPuzzleState('decrypt',true);
  }else{
    if(statusEl)statusEl.textContent='mismatch — adjust dials and try again';
  }
};

TS.checkPortScan=function(){
  var statusEl=document.getElementById('portScanStatus');
  if(!TS.portScanTarget||!statusEl)return;
  var selected=[].slice.call(document.querySelectorAll('#portScanRow .port-btn.open')).map(function(btn){
    return parseInt(btn.getAttribute('data-port'),10);
  }).sort(function(a,b){return a-b});
  var ok=selected.length===TS.portScanTarget.length&&selected.every(function(v,i){return v===TS.portScanTarget[i]});
  if(ok){
    statusEl.textContent='port map verified. access granted.';
    setPuzzleState('portscan',true);
  }else{
    statusEl.textContent='mismatch — adjust port states and retry';
  }
};

TS.puzzleSkip=function(id){setPuzzleState(id,true)};
TS.resetAllPuzzles=function(){
  ['checksum','pattern','decrypt','portscan','bottom'].forEach(function(id){
    setSetting('puzzle_'+id,false);updatePuzzleUI(id);
  });
  localStorage.removeItem('cb_puzzle_solved');
  localStorage.removeItem('cb_puzzle_dismissed');
};

/* ====== SETTINGS PANEL (Phase 9) ====== */
var settingsOverlay=document.getElementById('settingsOverlay');
var settingsCloseBtn=document.getElementById('settingsClose');
var toggleSettingsBtn=document.getElementById('toggleSettings');

function openSettings(){if(settingsOverlay)settingsOverlay.classList.add('open')}
function closeSettings(){if(settingsOverlay)settingsOverlay.classList.remove('open')}

if(toggleSettingsBtn)toggleSettingsBtn.addEventListener('click',openSettings);
if(settingsCloseBtn)settingsCloseBtn.addEventListener('click',closeSettings);
if(settingsOverlay)settingsOverlay.addEventListener('click',function(e){if(e.target===settingsOverlay)closeSettings()});
document.addEventListener('keydown',function(e){
  if(e.key==='Escape'&&settingsOverlay&&settingsOverlay.classList.contains('open'))closeSettings();
});

// Settings toggles
var settingEffectsBtn=document.getElementById('settingEffects');
if(settingEffectsBtn){
  settingEffectsBtn.classList.toggle('on',fxEnabled);
  settingEffectsBtn.addEventListener('click',function(){if(fxEnabled)fxStop();else fxStart()});
}

var settingBgAnimBtn=document.getElementById('settingBgAnim');
if(settingBgAnimBtn){
  settingBgAnimBtn.addEventListener('click',function(){
    var on=this.classList.toggle('on');
    this.setAttribute('aria-checked',on?'true':'false');
    var canvases=document.querySelectorAll('#particleCanvas,#rainCanvas');
    canvases.forEach(function(c){c.style.display=on?'':'none'});
    setSetting('bg_anim',on);
  });
}

var settingDevModeBtn=document.getElementById('settingDevMode');
if(settingDevModeBtn){
  var dm=getSetting('dev_mode',false);
  settingDevModeBtn.classList.toggle('on',dm);settingDevModeBtn.setAttribute('aria-checked',dm?'true':'false');
  settingDevModeBtn.addEventListener('click',function(){
    var on=this.classList.toggle('on');
    this.setAttribute('aria-checked',on?'true':'false');
    setSetting('dev_mode',on);
  });
}

var settingResetPuzzlesBtn=document.getElementById('settingResetPuzzles');
if(settingResetPuzzlesBtn)settingResetPuzzlesBtn.addEventListener('click',function(){TS.resetAllPuzzles()});

/* ====== PARTICLE CANVAS ====== */
var pC=document.getElementById('particleCanvas');
if(pC){
  var pX=pC.getContext('2d'),pts=[],mouse={x:-9999,y:-9999};
  var COLS=['#00ffcc','#00ff41','#8b5cf6','#ff00aa','#18dcff'],LD=130,MR=110;
  function isMob(){return window.innerWidth<640}
  function rPC(){pC.width=window.innerWidth;pC.height=window.innerHeight}
  function mkP(){var n=isMob()?50:130;pts=[];for(var i=0;i<n;i++)pts.push({x:Math.random()*pC.width,y:Math.random()*pC.height,vx:(Math.random()-0.5)*0.35,vy:(Math.random()-0.5)*0.35,r:Math.random()*2+0.8,col:COLS[Math.floor(Math.random()*COLS.length)],a:Math.random()*0.4+0.2})}
  function dP(){
    if(pC.style.display==='none'){requestAnimationFrame(dP);return}
    pX.clearRect(0,0,pC.width,pC.height);var n=pts.length;
    for(var i=0;i<n;i++){var a=pts[i],dx=a.x-mouse.x,dy=a.y-mouse.y,d=Math.sqrt(dx*dx+dy*dy);
      if(d<MR&&d>0){var f=(MR-d)/MR*0.6;a.vx+=(dx/d)*f*0.25;a.vy+=(dy/d)*f*0.25}
      a.vx*=0.99;a.vy*=0.99;a.x+=a.vx;a.y+=a.vy;
      if(a.x<0)a.x=pC.width;if(a.x>pC.width)a.x=0;if(a.y<0)a.y=pC.height;if(a.y>pC.height)a.y=0;
      pX.beginPath();pX.arc(a.x,a.y,a.r,0,Math.PI*2);pX.fillStyle=a.col;pX.globalAlpha=a.a;pX.fill();
      for(var j=i+1;j<n;j++){var b=pts[j],lx=a.x-b.x,ly=a.y-b.y,ld=Math.sqrt(lx*lx+ly*ly);
        if(ld<LD){pX.beginPath();pX.moveTo(a.x,a.y);pX.lineTo(b.x,b.y);pX.strokeStyle=a.col;pX.globalAlpha=(1-ld/LD)*0.12;pX.lineWidth=0.5;pX.stroke()}}
    }pX.globalAlpha=1;requestAnimationFrame(dP);
  }
  rPC();mkP();dP();
  document.addEventListener('mousemove',function(e){mouse.x=e.clientX;mouse.y=e.clientY});
  document.addEventListener('mouseleave',function(){mouse.x=-9999;mouse.y=-9999});
}

/* ====== CODE RAIN ====== */
var rCv=document.getElementById('rainCanvas');
if(rCv&&!reducedMotion){
  var rX=rCv.getContext('2d'),RC='01{}[];:<>?/\\|abcdef$#@!',FS=14,rCol,rDr;
  function rRC(){rCv.width=window.innerWidth;rCv.height=window.innerHeight}
  function iR(){rCol=Math.floor(rCv.width/FS);rDr=new Array(rCol).fill(1)}
  function dR(){
    if(rCv.style.display==='none'){requestAnimationFrame(dR);return}
    rX.fillStyle='rgba(6,6,14,0.12)';rX.fillRect(0,0,rCv.width,rCv.height);rX.fillStyle='#00ff41';rX.font=FS+'px monospace';
    for(var i=0;i<rCol;i++){rX.fillText(RC[Math.floor(Math.random()*RC.length)],i*FS,rDr[i]*FS);if(rDr[i]*FS>rCv.height&&Math.random()>0.975)rDr[i]=0;rDr[i]++}
    requestAnimationFrame(dR);
  }
  rRC();iR();dR();
}

/* ====== RESIZE HANDLER ====== */
var rt;
window.addEventListener('resize',function(){clearTimeout(rt);rt=setTimeout(function(){
  if(pC){rPC();mkP()}
  if(rCv&&!reducedMotion){rRC();iR()}
},250)});

/* ====== TYPEWRITER ====== */
var phrases=['$ recipe: osint reconnaissance','$ recipe: seo optimization','$ recipe: privacy toolkit','$ recipe: phone intelligence','$ recipe: data aggregation'];
var tyE=document.getElementById('typerText'),pI=0,cI=0,del=false;
function tL(){if(!tyE)return;var c=phrases[pI];if(!del){tyE.textContent=c.slice(0,cI+1);cI++;if(cI>=c.length){setTimeout(function(){del=true;tL()},2000);return}setTimeout(tL,50+Math.random()*30)}else{tyE.textContent=c.slice(0,cI);cI--;if(cI<0){del=false;cI=0;pI=(pI+1)%phrases.length;setTimeout(tL,300);return}setTimeout(tL,25)}}
tL();

/* ====== INTERSECTION OBSERVER ====== */
var rO=new IntersectionObserver(function(e){e.forEach(function(en){if(en.isIntersecting){en.target.classList.add('visible');rO.unobserve(en.target)}})},{threshold:0.12});
document.querySelectorAll('.reveal').forEach(function(el){rO.observe(el)});

/* ====== TERMINAL ====== */
var tLines=[
  {type:'cmd',text:'$ cat /etc/cookbook/manifesto'},
  {type:'out',text:'> information is leverage'},
  {type:'out',text:'> code is the skeleton key'},
  {type:'cmd',text:'$ ls -la /tools/thumpersecure/'},
  {type:'out',text:'drwxr-xr-x  palm-tree/    139\u2605  Python'},
  {type:'out',text:'drwxr-xr-x  Telespot/      99\u2605  JavaScript'},
  {type:'out',text:'drwxr-xr-x  Spin/          77\u2605  Rust'},
  {type:'cmd',text:'$ echo $MISSION'},
  {type:'out',text:'OSINT & SEO \u2014 the code cookbook'},
  {type:'cmd',text:'$ echo "I fight for the users."'},
  {type:'out',text:'\u2014 Tron'},
  {type:'cmd',text:'$ ./cook --recipe=all --serve'},
  {type:'out',text:'[+] Code Cookbook served. Bon app\u00e9tit.'}
];
var tB=document.getElementById('termBody'),tS=false,tSec=document.querySelector('.terminal-section');
var tO=new IntersectionObserver(function(e){e.forEach(function(en){if(en.isIntersecting&&!tS){tS=true;rT();tO.unobserve(en.target)}})},{threshold:0.25});
if(tSec)tO.observe(tSec);
async function rT(){
  if(!tB)return;
  for(var i=0;i<tLines.length;i++){var ln=tLines[i],el=document.createElement('div');el.className='term-line';tB.appendChild(el);
    if(ln.type==='cmd'){await tpL(el,ln.text,30)}else{el.innerHTML='<span class="output">'+ln.text+'</span>';el.classList.add('typed')}await sleep(250);
  }var cur=document.createElement('span');cur.className='term-cursor-end';cur.innerHTML='&nbsp;';tB.appendChild(cur);
}
function tpL(el,text,spd){return new Promise(function(res){el.classList.add('typed');var i=0,iv=setInterval(function(){el.textContent=text.slice(0,i+1);i++;if(i>=text.length){clearInterval(iv);res()}},spd)})}

/* ====== WIREFRAME CUBE ====== */
var wC=document.getElementById('wireframeCanvas');
if(wC){
  var wX=wC.getContext('2d'),wAng=0;
  function rWC(){var s=wC.parentElement;wC.width=s.clientWidth;wC.height=s.clientHeight}
  rWC();
  var cube=[[-1,-1,-1],[1,-1,-1],[1,1,-1],[-1,1,-1],[-1,-1,1],[1,-1,1],[1,1,1],[-1,1,1]];
  var edg=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[1,5],[2,6],[3,7]];
  function pr(p,a){
    var ca=Math.cos(a),sa=Math.sin(a),cb=Math.cos(a*0.7),sb=Math.sin(a*0.7);
    var x1=p[0]*ca-p[2]*sa,z1=p[0]*sa+p[2]*ca;
    var y1=p[1]*cb-z1*sb,z2=p[1]*sb+z1*cb;
    var sc=wC.width*0.28,d=3+z2;
    return[x1/d*sc+wC.width/2,y1/d*sc+wC.height/2,z2];
  }
  function dW(){
    wX.clearRect(0,0,wC.width,wC.height);
    var p2=cube.map(function(p){return pr(p,wAng)});
    var tronPulse=0.5+0.5*Math.sin(wAng*2);
    var cubeColor=tronPulse>0.5?'#18dcff':'#00ffcc';
    wX.shadowColor=cubeColor;wX.shadowBlur=8+tronPulse*6;wX.lineWidth=1.5;
    edg.forEach(function(e){
      var a=p2[e[0]],b=p2[e[1]];
      wX.globalAlpha=0.25+Math.max(0,(a[2]+b[2])/4)*0.25;
      wX.strokeStyle=cubeColor;
      wX.beginPath();wX.moveTo(a[0],a[1]);wX.lineTo(b[0],b[1]);wX.stroke();
    });
    p2.forEach(function(p){
      wX.globalAlpha=0.4+Math.max(0,p[2]/2)*0.4;
      wX.fillStyle=cubeColor;wX.beginPath();wX.arc(p[0],p[1],2.5,0,Math.PI*2);wX.fill();
    });
    wX.globalAlpha=1;wX.shadowBlur=0;
    wAng+=0.008;requestAnimationFrame(dW);
  }
  dW();window.addEventListener('resize',rWC);
}

/* ====== MULTI-MONITOR ====== */
function fillMon(id,lines){var el=document.getElementById(id);if(!el)return;var txt=lines.join('\n');el.textContent=txt+'\n'+txt}
fillMon('mon1',['> hack the gibson','CONNECT 192.168.1.1','AUTH: root@gibson','GRANTED','ls /secret/','garbage.dat   2.1K','worm.dat      8.4K','da_vinci.exe  41K','> cat da_vinci.exe','4F 50 45 4E 20 48','TRACE DETECTED','> evade --stealth','Routing thru 7 proxies','Connection masked']);
fillMon('mon2',['TRACE: 10.0.0.1','  > 172.16.0.1','HOP 1: 52ms  NYC','HOP 2: 89ms  LON','HOP 3: 134ms TYO','HOP 4: 201ms SYD','PKT LOSS: 0.2%','TTL: 64','PROTO: TCP/443','CIPHER: AES-256-GCM','TLS 1.3 OK','CERT: *.gibson.corp','OSINT SCAN: ACTIVE','PORTS: 22,80,443']);
fillMon('mon3',['DECRYPTING...','KEY: 2048-bit RSA','BLOCK: 16 bytes','MODE: CBC','IV: a3f2c881...','ROUND  1/14: OK','ROUND  2/14: OK','ROUND  3/14: OK','SUBSTITUTION: DONE','PERMUTATION: DONE','XOR: COMPLETE','PLAINTEXT READY','PASSWORD: *********','PASSWORD: swordfish']);
fillMon('mon4',['$ ./swordfish --crack','TARGET: DOD.GOV','TIME: 60s','Brute force: 2^28','Rainbow table: LOADED','Hash collision: FOUND','Firewall bypass: OK','IDS evasion: ACTIVE','Rootkit: DEPLOYED','ACCESS: GRANTED','Elapsed: 58.7s','> You got the job.']);

/* ====== INGREDIENTS TIMELINE ====== */
var iCv=document.getElementById('ingredientsCanvas');
if(iCv){
  var iX=iCv.getContext('2d'),iTick=0,iYears=[1986,1988,1996,2001,2007,2013,2019,2026];
  function rIC(){
    var dpr=Math.max(1,Math.min(2,window.devicePixelRatio||1));
    var w=iCv.clientWidth,h=iCv.clientHeight;
    iCv.width=Math.floor(w*dpr);iCv.height=Math.floor(h*dpr);
    iX.setTransform(dpr,0,0,dpr,0,0);
  }
  function dIC(){
    var w=iCv.clientWidth,h=iCv.clientHeight;
    iX.clearRect(0,0,w,h);
    var l=24,r=w-24,y=Math.floor(h*0.48),span=r-l;
    iX.strokeStyle='rgba(24,220,255,0.22)';iX.lineWidth=1;
    iX.beginPath();iX.moveTo(l,y);iX.lineTo(r,y);iX.stroke();
    for(var i=0;i<iYears.length;i++){
      var x=l+span*(i/(iYears.length-1)),p=0.5+0.5*Math.sin(iTick*0.06+i*0.85),rad=3.8+p*1.6;
      iX.fillStyle='rgba(0,255,204,'+(0.35+p*0.45)+')';
      iX.beginPath();iX.arc(x,y,rad,0,Math.PI*2);iX.fill();
      iX.strokeStyle='rgba(0,255,204,0.22)';
      iX.beginPath();iX.arc(x,y,rad+5.5,0,Math.PI*2);iX.stroke();
      iX.fillStyle='#6272a4';iX.font='11px JetBrains Mono, monospace';iX.textAlign='center';
      iX.fillText(String(iYears[i]),x,y+24);
    }
    var t=(Math.sin(iTick*0.022)+1)/2,bx=l+span*t;
    var g=iX.createRadialGradient(bx,y,2,bx,y,35);
    g.addColorStop(0,'rgba(255,0,170,0.75)');g.addColorStop(1,'rgba(255,0,170,0)');
    iX.fillStyle=g;iX.beginPath();iX.arc(bx,y,35,0,Math.PI*2);iX.fill();
    iTick+=1;requestAnimationFrame(dIC);
  }
  rIC();dIC();window.addEventListener('resize',rIC);
}

/* ====== QUOTE SIGNAL CANVAS ====== */
var qCv=document.getElementById('quoteSignalCanvas');
if(qCv){
  var qX=qCv.getContext('2d'),qT=0;
  function rQC(){
    var dpr=Math.max(1,Math.min(2,window.devicePixelRatio||1));
    var w=qCv.clientWidth,h=qCv.clientHeight;
    qCv.width=Math.floor(w*dpr);qCv.height=Math.floor(h*dpr);
    qX.setTransform(dpr,0,0,dpr,0,0);
  }
  function dQC(){
    var w=qCv.clientWidth,h=qCv.clientHeight;
    qX.clearRect(0,0,w,h);
    qX.fillStyle='rgba(6,8,14,0.26)';qX.fillRect(0,0,w,h);
    for(var i=0;i<3;i++){
      var amp=12+i*8,off=(i+1)*0.011,yy=h*(0.28+i*0.18);
      qX.strokeStyle=i===1?'rgba(24,220,255,0.45)':'rgba(0,255,204,0.22)';
      qX.lineWidth=i===1?1.4:1;
      qX.beginPath();
      for(var x=0;x<=w;x+=3){
        var y=yy+Math.sin((x*off)+qT*(0.03+i*0.01))*amp;
        if(x===0)qX.moveTo(x,y);else qX.lineTo(x,y);
      }
      qX.stroke();
    }
    var px=((Math.sin(qT*0.017)+1)/2)*(w-48)+24;
    var pg=qX.createRadialGradient(px,h*0.5,2,px,h*0.5,28);
    pg.addColorStop(0,'rgba(255,0,170,0.75)');pg.addColorStop(1,'rgba(255,0,170,0)');
    qX.fillStyle=pg;qX.beginPath();qX.arc(px,h*0.5,28,0,Math.PI*2);qX.fill();
    qT+=1;requestAnimationFrame(dQC);
  }
  rQC();dQC();window.addEventListener('resize',rQC);
}

/* ====== QUOTE CYCLER ====== */
var lQ=[].slice.call(document.querySelectorAll('.legend-quote-card')),lQi=0;
if(lQ.length){setInterval(function(){lQ.forEach(function(c){c.classList.remove('hot')});lQ[lQi].classList.add('hot');lQi=(lQi+1)%lQ.length},2400)}

/* ====== BOTTOM PUZZLE (existing, migrated to localStorage) ====== */
var cbPuzzleSeen=false;
function cbRot13(s){return String(s||'').replace(/[a-zA-Z]/g,function(ch){var c=ch.charCodeAt(0);var a=c>=97?97:65;return String.fromCharCode(((c-a+13)%26)+a)})}
function cbTryAtob(b64){try{return atob(String(b64||'').replace(/\s+/g,''))}catch(e){return null}}
function cbBytes(s){return new TextEncoder().encode(String(s||''))}
async function cbSha256Hex(s){if(!window.crypto||!crypto.subtle)return null;var buf=await crypto.subtle.digest('SHA-256',cbBytes(s));return[].slice.call(new Uint8Array(buf)).map(function(x){return x.toString(16).padStart(2,'0')}).join('')}
function cbEl(tag,cls){var el=document.createElement(tag);if(cls)el.className=cls;return el}

function cbMountToast(openFn){
  var t=cbEl('div','cb-toast');t.setAttribute('role','status');t.setAttribute('aria-live','polite');
  var inner=cbEl('div','cb-toast-inner');
  var icon=cbEl('div','cb-toast-icon');icon.textContent='RX';
  var copy=cbEl('div');
  var title=cbEl('div','cb-toast-title');title.textContent='incoming transmission';
  var desc=cbEl('div','cb-toast-desc');desc.textContent='You hit the bottom of the grid. An encrypted packet is waiting \u2014 crack it to unlock a fingerprint.';
  var actions=cbEl('div','cb-toast-actions');
  var open=cbEl('button','cb-mini-btn');open.type='button';open.textContent='open puzzle';
  var dismiss=cbEl('button','cb-mini-btn secondary');dismiss.type='button';dismiss.textContent='dismiss';
  actions.appendChild(open);actions.appendChild(dismiss);
  copy.appendChild(title);copy.appendChild(desc);copy.appendChild(actions);
  inner.appendChild(icon);inner.appendChild(copy);t.appendChild(inner);document.body.appendChild(t);
  requestAnimationFrame(function(){t.classList.add('on')});
  function kill(){t.classList.remove('on');setTimeout(function(){t.remove()},240)}
  open.addEventListener('click',function(){kill();openFn()});
  dismiss.addEventListener('click',function(){setSetting('puzzle_bottom_dismissed',true);kill()});
  return{remove:kill};
}

function cbBuildModal(){
  var payloadB64='UEhBU0VfMjogUk9UMTMKVE9LRU46IGZ2dGFueS1uZy1ndXItb2JnZ2J6Ck5FWFQ6IHNoYTI1NihwbGFpbnRleHQpIC0+IGZpcnN0IDYgaGV4Cg==';
  var expectedPlain='signal-at-the-bottom';
  var backdrop=cbEl('div','cb-backdrop');backdrop.setAttribute('role','dialog');backdrop.setAttribute('aria-modal','true');backdrop.setAttribute('aria-label','Cyber puzzle modal');
  var modal=cbEl('div','cb-modal');
  var head=cbEl('div','cb-head');var ht=cbEl('div','cb-head-title');
  var kick=cbEl('div','cb-kicker');kick.textContent='futuristic puzzle protocol';
  var h1=cbEl('div','cb-title');h1.textContent='TRANSMISSION INTERCEPTED \u2014 DECRYPT THE HANDSHAKE';
  ht.appendChild(kick);ht.appendChild(h1);
  var close=cbEl('button','cb-close');close.type='button';close.setAttribute('aria-label','Close');close.textContent='\u00d7';
  head.appendChild(ht);head.appendChild(close);
  var body=cbEl('div','cb-body');
  var left=cbEl('div','cb-panel');var lh=cbEl('div','cb-panel-h');
  var lhl=cbEl('div','l');lhl.textContent='packet capture';var lhr=cbEl('div','r');lhr.textContent='base64 payload';
  lh.appendChild(lhl);lh.appendChild(lhr);
  var code=cbEl('div','cb-code');code.textContent=payloadB64+'\n\n';
  var dim=cbEl('span','dim');dim.textContent='hint: decode base64, extract TOKEN, apply ROT13, then compute sha256 fingerprint.';
  code.appendChild(dim);left.appendChild(lh);left.appendChild(code);
  var right=cbEl('div','cb-panel');var rh=cbEl('div','cb-panel-h');
  var rhl=cbEl('div','l');rhl.textContent='challenge console';var rhr=cbEl('div','r');rhr.textContent='zero-trust gate';
  rh.appendChild(rhl);rh.appendChild(rhr);
  var con=cbEl('div','cb-console');
  function mkStep(n,t,p){var s=cbEl('div','cb-step');var num=cbEl('div','cb-step-num');num.textContent=n;var txt=cbEl('div','cb-step-text');var b=cbEl('b');b.textContent=t;var pp=cbEl('p');pp.textContent=p;txt.appendChild(b);txt.appendChild(pp);s.appendChild(num);s.appendChild(txt);return s}
  con.appendChild(mkStep('1','decode','Turn the packet from base64 into plain text.'));
  con.appendChild(mkStep('2','rot13','Transform the TOKEN line with ROT13.'));
  con.appendChild(mkStep('3','unlock','Enter the plaintext phrase to mint your fingerprint.'));
  con.appendChild(mkStep('4','contact handshake','Use your fingerprint key to unlock the secure contact channel.'));
  var field=cbEl('div','cb-field');var lab=document.createElement('label');lab.setAttribute('for','cbPuzzleInput');lab.textContent='plaintext phrase';
  var input=cbEl('input','cb-input');input.id='cbPuzzleInput';input.autocomplete='off';input.spellcheck=false;input.placeholder='type the decrypted plaintext here';
  field.appendChild(lab);field.appendChild(input);
  var tools=cbEl('div','cb-tools');
  var btnDecode=cbEl('button','cb-mini-btn');btnDecode.type='button';btnDecode.textContent='decode base64';
  var btnRot=cbEl('button','cb-mini-btn secondary');btnRot.type='button';btnRot.textContent='apply rot13';
  var btnUnlock=cbEl('button','cb-mini-btn');btnUnlock.type='button';btnUnlock.textContent='unlock';
  tools.appendChild(btnDecode);tools.appendChild(btnRot);tools.appendChild(btnUnlock);
  var out=cbEl('div','cb-out');out.innerHTML='<span class="warn">awaiting tools.</span> Click <span class="hl">decode base64</span> to begin.';
  var fp=cbEl('div','cb-fp');
  var contactWrap=cbEl('div','cb-contact');contactWrap.style.display='none';
  var contactLabel=document.createElement('label');contactLabel.setAttribute('for','cbContactInput');contactLabel.textContent='fingerprint key';
  var contactInput=cbEl('input','cb-input');contactInput.id='cbContactInput';contactInput.autocomplete='off';contactInput.spellcheck=false;contactInput.placeholder='enter 6-character key';
  var contactTools=cbEl('div','cb-tools');
  var contactBtn=cbEl('button','cb-mini-btn');contactBtn.type='button';contactBtn.textContent='reveal contact';
  contactTools.appendChild(contactBtn);
  var contactOut=cbEl('div','cb-out');contactOut.innerHTML='<span class="warn">awaiting unlock.</span> complete step 3 to arm this channel.';
  contactWrap.appendChild(contactLabel);contactWrap.appendChild(contactInput);contactWrap.appendChild(contactTools);contactWrap.appendChild(contactOut);
  con.appendChild(field);con.appendChild(tools);con.appendChild(out);con.appendChild(fp);con.appendChild(contactWrap);
  right.appendChild(rh);right.appendChild(con);
  body.appendChild(left);body.appendChild(right);modal.appendChild(head);modal.appendChild(body);
  backdrop.appendChild(modal);document.body.appendChild(backdrop);
  var decoded=null,token=null,rot=null,done=false,contactKey=null;
  var contactB64='dGh1bXBlcnNlY3VyZUBwbS5tZQ==';
  function setOut(html){out.innerHTML=html}
  function parseToken(txt){var m=String(txt||'').match(/^\s*TOKEN:\s*(.+?)\s*$/mi);return m?m[1].trim():null}
  btnDecode.addEventListener('click',function(){
    decoded=cbTryAtob(payloadB64);if(!decoded){setOut('<span class="bad">decode failed.</span>');return}
    token=parseToken(decoded);
    setOut('<span class="ok">decoded.</span><br><br><span class="hl">'+String(decoded).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/\n/g,'<br>')+'</span>');
  });
  btnRot.addEventListener('click',function(){
    if(!decoded){setOut('<span class="warn">decode first.</span>');return}
    if(!token){setOut('<span class="bad">TOKEN not found.</span>');return}
    rot=cbRot13(token);
    setOut('<span class="ok">rot13 complete.</span> TOKEN \u2192 <span class="hl">'+token+'</span><br>PLAINTEXT \u2192 <span class="hl">'+rot+'</span>');
    input.value=rot;input.focus();
  });
  btnUnlock.addEventListener('click',async function(){
    var got=String(input.value||'').trim().toLowerCase();
    if(!got){setOut('<span class="warn">enter plaintext.</span>');return}
    if(got!==expectedPlain){setOut('<span class="bad">access denied.</span> plaintext mismatch.');return}
    var hx=await cbSha256Hex(got);
    if(hx){
      contactKey=hx.slice(0,6).toUpperCase();
      setOut('<span class="ok">access granted.</span> fingerprint key: <span class="hl">'+contactKey+'</span>');
      fp.textContent='sha256: '+hx;
    }else{
      contactKey=String(got).replace(/[^a-z0-9]/gi,'').slice(0,6).toUpperCase().padEnd(6,'X');
      setOut('<span class="ok">access granted.</span> fallback key: <span class="hl">'+contactKey+'</span>');
    }
    contactWrap.style.display='block';
    contactInput.value='';
    contactOut.innerHTML='<span class="warn">final handshake required.</span> enter the fingerprint key above to reveal contact.';
    contactInput.focus();
  });
  contactBtn.addEventListener('click',function(){
    var typed=String(contactInput.value||'').trim().toUpperCase();
    if(!typed){contactOut.innerHTML='<span class="warn">enter fingerprint key.</span>';return}
    if(!contactKey||typed!==contactKey){contactOut.innerHTML='<span class="bad">handshake failed.</span> key mismatch.';return}
    var email=cbTryAtob(contactB64)||'thumpersecure@pm.me';
    contactOut.innerHTML='<span class="ok">channel unlocked.</span> contact: <a class="hl" href="mailto:'+email+'">'+email+'</a>';
    setOut('<span class="ok">contact handshake complete.</span> secure channel delivered.');
    setSetting('puzzle_bottom',true);done=true;
    contactBtn.disabled=true;contactBtn.textContent='channel open';
  });
  contactInput.addEventListener('keydown',function(e){
    if(e.key==='Enter'){e.preventDefault();contactBtn.click()}
  });
  function openM(){backdrop.classList.add('on');document.body.style.overflow='hidden';setTimeout(function(){input.focus()},40)}
  function closeM(){backdrop.classList.remove('on');document.body.style.overflow='';if(!done)setSetting('puzzle_bottom_dismissed',true);setTimeout(function(){backdrop.remove()},260)}
  close.addEventListener('click',closeM);
  backdrop.addEventListener('click',function(e){if(e.target===backdrop)closeM()});
  document.addEventListener('keydown',function kh(e){if(e.key==='Escape'&&backdrop.classList.contains('on')){e.preventDefault();closeM();document.removeEventListener('keydown',kh)}});
  return{open:openM,close:closeM};
}

function cbInitBottomPuzzle(){
  if(cbPuzzleSeen)return;cbPuzzleSeen=true;
  if(getPuzzleState('bottom'))return;
  if(getSetting('puzzle_bottom_dismissed',false))return;
  var modal=null;
  function openModal(){if(!modal)modal=cbBuildModal();modal.open()}
  cbMountToast(openModal);
}
(function(){
  var s=document.getElementById('cbBottomSentinel');
  if(!s||!('IntersectionObserver' in window))return;
  var ob=new IntersectionObserver(function(entries){entries.forEach(function(en){if(en.isIntersecting){ob.disconnect();setTimeout(cbInitBottomPuzzle,140)}})},{threshold:0.12});
  ob.observe(s);
})();

})();
</script>
</body>
</html>
